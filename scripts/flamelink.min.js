!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("firebase")):"function"==typeof define&&define.amd?define("flamelink",["firebase"],t):"object"==typeof exports?exports.flamelink=t(require("firebase")):e.flamelink=t(e.firebase)}(this,function(e){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=100)}([function(e,t){var r=Array.isArray;e.exports=r},function(e,t,r){var n=r(51),i="object"==typeof self&&self&&self.Object===Object&&self,o=n||i||Function("return this")();e.exports=o},function(e,t){function r(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=r},function(e,t,r){function n(e,t){var r=o(e,t);return i(r)?r:void 0}var i=r(118),o=r(124);e.exports=n},function(e,t){function r(e){return null!=e&&"object"==typeof e}e.exports=r},function(e,t,r){function n(e){return null==e?void 0===e?s:u:c&&c in Object(e)?o(e):a(e)}var i=r(6),o=r(120),a=r(121),u="[object Null]",s="[object Undefined]",c=i?i.toStringTag:void 0;e.exports=n},function(e,t,r){var n=r(1),i=n.Symbol;e.exports=i},function(e,t,r){function n(e){return a(e)?i(e):o(e)}var i=r(61),o=r(63),a=r(17);e.exports=n},function(e,t,r){function n(e){if("string"==typeof e||i(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}var i=r(9),o=1/0;e.exports=n},function(e,t,r){function n(e){return"symbol"==typeof e||o(e)&&i(e)==a}var i=r(5),o=r(4),a="[object Symbol]";e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){function n(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?u(e)?o(e[0],e[1]):i(e):s(e)}var i=r(106),o=r(157),a=r(36),u=r(0),s=r(162);e.exports=n},function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var i=r(108),o=r(109),a=r(110),u=r(111),s=r(112);n.prototype.clear=i,n.prototype.delete=o,n.prototype.get=a,n.prototype.has=u,n.prototype.set=s,e.exports=n},function(e,t,r){function n(e,t){for(var r=e.length;r--;)if(i(e[r][0],t))return r;return-1}var i=r(24);e.exports=n},function(e,t,r){var n=r(3),i=n(Object,"create");e.exports=i},function(e,t,r){function n(e,t){var r=e.__data__;return i(t)?r["string"==typeof t?"string":"hash"]:r.map}var i=r(133);e.exports=n},function(e,t){function r(e,t){return!!(t=null==t?n:t)&&("number"==typeof e||i.test(e))&&e>-1&&e%1==0&&e<t}var n=9007199254740991,i=/^(?:0|[1-9]\d*)$/;e.exports=r},function(e,t,r){function n(e){return null!=e&&o(e.length)&&!i(e)}var i=r(26),o=r(32);e.exports=n},function(e,t,r){function n(e,t){return i(e)?e:o(e,t)?[e]:a(u(e))}var i=r(0),o=r(35),a=r(70),u=r(72);e.exports=n},function(e,t,r){function n(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=i(e.prototype),n=e.apply(r,t);return o(n)?n:r}}var i=r(20),o=r(2);e.exports=n},function(e,t,r){var n=r(2),i=Object.create,o=function(){function e(){}return function(t){if(!n(t))return{};if(i)return i(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();e.exports=o},function(e,t){function r(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}e.exports=r},function(e,t,r){function n(e,t,r,n){var a=!r;r||(r={});for(var u=-1,s=t.length;++u<s;){var c=t[u],f=n?n(r[c],e[c],c,r,e):void 0;void 0===f&&(f=e[c]),a?o(r,c,f):i(r,c,f)}return r}var i=r(38),o=r(77);e.exports=n},function(e,t,r){function n(e){var t=this.__data__=new i(e);this.size=t.size}var i=r(12),o=r(113),a=r(114),u=r(115),s=r(116),c=r(117);n.prototype.clear=o,n.prototype.delete=a,n.prototype.get=u,n.prototype.has=s,n.prototype.set=c,e.exports=n},function(e,t){function r(e,t){return e===t||e!==e&&t!==t}e.exports=r},function(e,t,r){var n=r(3),i=r(1),o=n(i,"Map");e.exports=o},function(e,t,r){function n(e){if(!o(e))return!1;var t=i(e);return t==u||t==s||t==a||t==c}var i=r(5),o=r(2),a="[object AsyncFunction]",u="[object Function]",s="[object GeneratorFunction]",c="[object Proxy]";e.exports=n},function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var i=r(125),o=r(132),a=r(134),u=r(135),s=r(136);n.prototype.clear=i,n.prototype.delete=o,n.prototype.get=a,n.prototype.has=u,n.prototype.set=s,e.exports=n},function(e,t){function r(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}e.exports=r},function(e,t,r){var n=r(145),i=r(60),o=Object.prototype,a=o.propertyIsEnumerable,u=Object.getOwnPropertySymbols,s=u?function(e){return null==e?[]:(e=Object(e),n(u(e),function(t){return a.call(e,t)}))}:i;e.exports=s},function(e,t,r){var n=r(147),i=r(4),o=Object.prototype,a=o.hasOwnProperty,u=o.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(e){return i(e)&&a.call(e,"callee")&&!u.call(e,"callee")};e.exports=s},function(e,t,r){(function(e){var n=r(1),i=r(148),o="object"==typeof t&&t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,u=a&&a.exports===o,s=u?n.Buffer:void 0,c=s?s.isBuffer:void 0,f=c||i;e.exports=f}).call(t,r(10)(e))},function(e,t){function r(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}var n=9007199254740991;e.exports=r},function(e,t){function r(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}var n=Object.prototype;e.exports=r},function(e,t,r){function n(e,t){t=i(t,e);for(var r=0,n=t.length;null!=e&&r<n;)e=e[o(t[r++])];return r&&r==n?e:void 0}var i=r(18),o=r(8);e.exports=n},function(e,t,r){function n(e,t){if(i(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!o(e))||(u.test(e)||!a.test(e)||null!=t&&e in Object(t))}var i=r(0),o=r(9),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/;e.exports=n},function(e,t){function r(e){return e}e.exports=r},function(e,t,r){function n(e){var t=i(e),r=t%1;return t===t?r?t-r:t:0}var i=r(166);e.exports=n},function(e,t,r){function n(e,t,r){var n=e[t];u.call(e,t)&&o(n,r)&&(void 0!==r||t in e)||i(e,t,r)}var i=r(77),o=r(24),a=Object.prototype,u=a.hasOwnProperty;e.exports=n},function(e,t,r){function n(e,t,r,n,_,R,j,O){var S=t&g;if(!S&&"function"!=typeof e)throw new TypeError(h);var k=n?n.length:0;if(k||(t&=~(b|x),n=_=void 0),j=void 0===j?j:w(d(j),0),O=void 0===O?O:d(O),k-=_?_.length:0,t&x){var F=n,I=_;n=_=void 0}var P=S?void 0:c(e),A=[e,t,r,n,_,F,I,R,j,O];if(P&&f(A,P),e=A[0],t=A[1],r=A[2],n=A[3],_=A[4],O=A[9]=void 0===A[9]?S?0:e.length:w(A[9]-k,0),!O&&t&(y|m)&&(t&=~(y|m)),t&&t!=v)E=t==y||t==m?a(e,t,O):t!=b&&t!=(v|b)||_.length?u.apply(void 0,A):s(e,t,r,n);else var E=o(e,t,r);return p((P?i:l)(E,A),e,t)}var i=r(81),o=r(174),a=r(175),u=r(83),s=r(193),c=r(87),f=r(194),l=r(89),p=r(91),d=r(37),h="Expected a function",v=1,g=2,y=8,m=16,b=32,x=64,w=Math.max;e.exports=n},function(e,t){function r(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}e.exports=r},function(e,t,r){function n(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=a,this.__views__=[]}var i=r(20),o=r(42),a=4294967295;n.prototype=i(o.prototype),n.prototype.constructor=n,e.exports=n},function(e,t){function r(){}e.exports=r},function(e,t){function r(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}e.exports=r},function(e,t){function r(e,t){for(var r=-1,i=e.length,o=0,a=[];++r<i;){var u=e[r];u!==t&&u!==n||(e[r]=n,a[o++]=r)}return a}var n="__lodash_placeholder__";e.exports=r},function(e,t,r){function n(e,t,r,A,E,D){var L,C=t&R,T=t&j,M=t&O;if(r&&(L=E?r(e,A,E,D):r(e)),void 0!==L)return L;if(!w(e))return e;var B=b(e);if(B){if(L=g(e),!C)return f(e,L)}else{var U=v(e),N=U==k||U==F;if(x(e))return c(e,C);if(U==I||U==S||N&&!E){if(L=T||N?{}:m(e),!C)return T?p(e,s(L,e)):l(e,u(L,e))}else{if(!P[U])return E?e:{};L=y(e,U,n,C)}}D||(D=new i);var W=D.get(e);if(W)return W;D.set(e,L);var z=M?T?h:d:T?keysIn:_,G=B?void 0:z(e);return o(G||e,function(i,o){G&&(o=i,i=e[o]),a(L,o,n(i,t,r,o,e,D))}),L}var i=r(23),o=r(43),a=r(38),u=r(94),s=r(196),c=r(199),f=r(21),l=r(200),p=r(201),d=r(58),h=r(202),v=r(65),g=r(203),y=r(204),m=r(213),b=r(0),x=r(31),w=r(2),_=r(7),R=1,j=2,O=4,S="[object Arguments]",k="[object Function]",F="[object GeneratorFunction]",I="[object Object]",P={};P[S]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object DataView]"]=P["[object Boolean]"]=P["[object Date]"]=P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Map]"]=P["[object Number]"]=P[I]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object Symbol]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P["[object Error]"]=P[k]=P["[object WeakMap]"]=!1,e.exports=n},function(e,t,r){var n=r(64),i=n(Object.getPrototypeOf,Object);e.exports=i},function(e,t,r){function n(e){var t=new e.constructor(e.byteLength);return new i(t).set(new i(e)),t}var i=r(55);e.exports=n},function(e,t){function r(e,t,r,n){var i=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}e.exports=r},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,r){"use strict";var n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduceRight(function(e,t){return e.then(t)},Promise.resolve(e))}};e.exports=n},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(t,r(119))},function(e,t){function r(e){if(null!=e){try{return i.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var n=Function.prototype,i=n.toString;e.exports=r},function(e,t,r){function n(e,t,r,a,u){return e===t||(null==e||null==t||!o(e)&&!o(t)?e!==e&&t!==t:i(e,t,r,a,n,u))}var i=r(137),o=r(4);e.exports=n},function(e,t,r){function n(e,t,r,n,c,f){var l=r&u,p=e.length,d=t.length;if(p!=d&&!(l&&d>p))return!1;var h=f.get(e);if(h&&f.get(t))return h==t;var v=-1,g=!0,y=r&s?new i:void 0;for(f.set(e,t),f.set(t,e);++v<p;){var m=e[v],b=t[v];if(n)var x=l?n(b,m,v,t,e,f):n(m,b,v,e,t,f);if(void 0!==x){if(x)continue;g=!1;break}if(y){if(!o(t,function(e,t){if(!a(y,t)&&(m===e||c(m,e,r,n,f)))return y.push(t)})){g=!1;break}}else if(m!==b&&!c(m,b,r,n,f)){g=!1;break}}return f.delete(e),f.delete(t),g}var i=r(138),o=r(141),a=r(142),u=1,s=2;e.exports=n},function(e,t,r){var n=r(1),i=n.Uint8Array;e.exports=i},function(e,t){function r(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}e.exports=r},function(e,t){function r(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}e.exports=r},function(e,t,r){function n(e){return i(e,a,o)}var i=r(59),o=r(29),a=r(7);e.exports=n},function(e,t,r){function n(e,t,r){var n=t(e);return o(e)?n:i(n,r(e))}var i=r(28),o=r(0);e.exports=n},function(e,t){function r(){return[]}e.exports=r},function(e,t,r){function n(e,t){var r=a(e),n=!r&&o(e),f=!r&&!n&&u(e),p=!r&&!n&&!f&&c(e),d=r||n||f||p,h=d?i(e.length,String):[],v=h.length;for(var g in e)!t&&!l.call(e,g)||d&&("length"==g||f&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,v))||h.push(g);return h}var i=r(146),o=r(30),a=r(0),u=r(31),s=r(16),c=r(62),f=Object.prototype,l=f.hasOwnProperty;e.exports=n},function(e,t,r){var n=r(149),i=r(150),o=r(151),a=o&&o.isTypedArray,u=a?i(a):n;e.exports=u},function(e,t,r){function n(e){if(!i(e))return o(e);var t=[];for(var r in Object(e))u.call(e,r)&&"constructor"!=r&&t.push(r);return t}var i=r(33),o=r(152),a=Object.prototype,u=a.hasOwnProperty;e.exports=n},function(e,t){function r(e,t){return function(r){return e(t(r))}}e.exports=r},function(e,t,r){var n=r(153),i=r(25),o=r(154),a=r(155),u=r(66),s=r(5),c=r(52),f=c(n),l=c(i),p=c(o),d=c(a),h=c(u),v=s;(n&&"[object DataView]"!=v(new n(new ArrayBuffer(1)))||i&&"[object Map]"!=v(new i)||o&&"[object Promise]"!=v(o.resolve())||a&&"[object Set]"!=v(new a)||u&&"[object WeakMap]"!=v(new u))&&(v=function(e){var t=s(e),r="[object Object]"==t?e.constructor:void 0,n=r?c(r):"";if(n)switch(n){case f:return"[object DataView]";case l:return"[object Map]";case p:return"[object Promise]";case d:return"[object Set]";case h:return"[object WeakMap]"}return t}),e.exports=v},function(e,t,r){var n=r(3),i=r(1),o=n(i,"WeakMap");e.exports=o},function(e,t,r){function n(e){return e===e&&!i(e)}var i=r(2);e.exports=n},function(e,t){function r(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}e.exports=r},function(e,t,r){function n(e,t,r){var n=null==e?void 0:i(e,t);return void 0===n?r:n}var i=r(34);e.exports=n},function(e,t,r){var n=r(158),i=/^\./,o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,u=n(function(e){var t=[];return i.test(e)&&t.push(""),e.replace(o,function(e,r,n,i){t.push(n?i.replace(a,"$1"):r||e)}),t});e.exports=u},function(e,t,r){function n(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(o);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(n.Cache||i),r}var i=r(27),o="Expected a function";n.Cache=i,e.exports=n},function(e,t,r){function n(e){return null==e?"":i(e)}var i=r(159);e.exports=n},function(e,t){function r(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}e.exports=r},function(e,t,r){function n(e,t){return null!=e&&o(e,t,i)}var i=r(160),o=r(161);e.exports=n},function(e,t){function r(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}e.exports=r},function(e,t,r){function n(e,t,r,n){if(!u(e))return e;t=o(t,e);for(var c=-1,f=t.length,l=f-1,p=e;null!=p&&++c<f;){var d=s(t[c]),h=r;if(c!=l){var v=p[d];h=n?n(v,d,p):void 0,void 0===h&&(h=u(v)?v:a(t[c+1])?[]:{})}i(p,d,h),p=p[d]}return e}var i=r(38),o=r(18),a=r(16),u=r(2),s=r(8);e.exports=n},function(e,t,r){function n(e,t,r){"__proto__"==t&&i?i(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var i=r(78);e.exports=n},function(e,t,r){var n=r(3),i=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},function(e,t,r){var n=r(169),i=n("pick",r(221));i.placeholder=r(80),e.exports=i},function(e,t){e.exports={}},function(e,t,r){var n=r(36),i=r(82),o=i?function(e,t){return i.set(e,t),e}:n;e.exports=o},function(e,t,r){var n=r(66),i=n&&new n;e.exports=i},function(e,t,r){function n(e,t,r,b,x,w,_,R,j,O){function S(){for(var d=arguments.length,h=Array(d),v=d;v--;)h[v]=arguments[v];if(P)var g=c(S),y=a(h,g);if(b&&(h=i(h,b,x,P)),w&&(h=o(h,w,_,P)),d-=y,P&&d<O){var m=l(h,g);return s(e,t,n,S.placeholder,r,h,m,R,j,O-d)}var D=F?r:this,L=I?D[e]:e;return d=h.length,R?h=f(h,R):A&&d>1&&h.reverse(),k&&j<d&&(h.length=j),this&&this!==p&&this instanceof S&&(L=E||u(L)),L.apply(D,h)}var k=t&y,F=t&d,I=t&h,P=t&(v|g),A=t&m,E=I?void 0:u(e);return S}var i=r(84),o=r(85),a=r(176),u=r(19),s=r(86),c=r(93),f=r(192),l=r(44),p=r(1),d=1,h=2,v=8,g=16,y=128,m=512;e.exports=n},function(e,t){function r(e,t,r,i){for(var o=-1,a=e.length,u=r.length,s=-1,c=t.length,f=n(a-u,0),l=Array(c+f),p=!i;++s<c;)l[s]=t[s];for(;++o<u;)(p||o<a)&&(l[r[o]]=e[o]);for(;f--;)l[s++]=e[o++];return l}var n=Math.max;e.exports=r},function(e,t){function r(e,t,r,i){for(var o=-1,a=e.length,u=-1,s=r.length,c=-1,f=t.length,l=n(a-s,0),p=Array(l+f),d=!i;++o<l;)p[o]=e[o];for(var h=o;++c<f;)p[h+c]=t[c];for(;++u<s;)(d||o<a)&&(p[h+r[u]]=e[o++]);return p}var n=Math.max;e.exports=r},function(e,t,r){function n(e,t,r,n,d,h,v,g,y,m){var b=t&f,x=b?v:void 0,w=b?void 0:v,_=b?h:void 0,R=b?void 0:h;t|=b?l:p,(t&=~(b?p:l))&c||(t&=~(u|s));var j=[e,t,d,_,x,R,w,g,y,m],O=r.apply(void 0,j);return i(e)&&o(O,j),O.placeholder=n,a(O,e,t)}var i=r(177),o=r(89),a=r(91),u=1,s=2,c=4,f=8,l=32,p=64;e.exports=n},function(e,t,r){var n=r(82),i=r(178),o=n?function(e){return n.get(e)}:i;e.exports=o},function(e,t,r){function n(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}var i=r(20),o=r(42);n.prototype=i(o.prototype),n.prototype.constructor=n,e.exports=n},function(e,t,r){var n=r(81),i=r(90),o=i(n);e.exports=o},function(e,t){function r(e){var t=0,r=0;return function(){var a=o(),u=i-(a-r);if(r=a,u>0){if(++t>=n)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var n=800,i=16,o=Date.now;e.exports=r},function(e,t,r){function n(e,t,r){var n=t+"";return a(e,o(n,u(i(n),r)))}var i=r(183),o=r(184),a=r(92),u=r(187);e.exports=n},function(e,t,r){var n=r(185),i=r(90),o=i(n);e.exports=o},function(e,t){function r(e){return e.placeholder}e.exports=r},function(e,t,r){function n(e,t){return e&&i(t,o(t),e)}var i=r(22),o=r(7);e.exports=n},function(e,t,r){function n(e){return a(e)?i(e,!0):o(e)}var i=r(61),o=r(197),a=r(17);e.exports=n},function(e,t,r){var n=r(28),i=r(46),o=r(29),a=r(60),u=Object.getOwnPropertySymbols,s=u?function(e){for(var t=[];e;)n(t,o(e)),e=i(e);return t}:a;e.exports=s},function(e,t,r){function n(e,t,r){t=r?void 0:t;var a=i(e,o,void 0,void 0,void 0,void 0,void 0,t);return a.placeholder=n.placeholder,a}var i=r(39),o=8;n.placeholder={},e.exports=n},function(e,t,r){function n(e){return a(o(e,void 0,i),e+"")}var i=r(216),o=r(219),a=r(92);e.exports=n},function(e,t,r){"use strict";function n(e){return new Error("[FLAMELINK] "+e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(i,o){try{var a=t[i](o),u=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}return n("next")})}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=null,r=null,n=null,a=null,s=null,f=!1,p=Object.assign({},I.DEFAULT_CONFIG,e),h=p.env,g=p.locale;if(p.firebaseApp)t=p.firebaseApp,p.isAdminApp&&(f=!0);else if(!t){var m=p.apiKey,x=p.authDomain,_=p.databaseURL,j=p.storageBucket,S=p.projectId;if(!(m&&x&&_&&S))throw(0,O.default)('The following config properties are mandatory: "apiKey", "authDomain", "databaseURL", "projectId"');t=c.initializeApp({apiKey:m,authDomain:x,databaseURL:_,storageBucket:j,projectId:S},S)}var A=function(e,r){return e||"function"==typeof t[r]?t[r]():null};r=A(r,"database"),n=A(n,"storage"),a=A(a,"auth"),s=A(s,"firestore");var E={ref:function(e){if(!r)throw(0,O.default)('The Database service is not available. Make sure the "databaseURL" property is provided.');return r.ref((0,F.getSchemasRefPath)(e||null,h,g))},getRaw:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="string"==typeof e?e:null,n="string"==typeof e?t:e||{},i=(0,F.applyOrderBy)(E.ref(r),n);return(0,F.applyFilters)(i,n).once(n.event||"value")},get:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n,o,a,u,s,c,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=10;break}if(r=(0,F.pluckResultFields)(f.fields),(n=(0,y.default)(P,"schemas["+h+"]."+t))&&!(0,F.hasNonCacheableOptions)(f)){e.next=8;break}return e.next=6,E.getRaw(t,f);case 6:o=e.sent,n=o.val();case 8:return a=i({},t,n),e.abrupt("return",r(a)[t]);case 10:if(f=t||{},(u=(0,y.default)(P,"schemas["+h+"]"))&&!(0,F.hasNonCacheableOptions)(f)){e.next=17;break}return e.next=15,E.getRaw(null,f);case 15:s=e.sent,u=s.val();case 17:return c=(0,F.pluckResultFields)(f.fields),e.abrupt("return",c(u));case 19:case"end":return e.stop()}},e,this)}));return e}(),getFieldsRaw:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="string"==typeof e?e+"/fields":null,n="string"==typeof e?t:e||{},i=(0,F.applyOrderBy)(E.ref(r),n);return(0,F.applyFilters)(i,n).once(n.event||"value")},getFields:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n,o,a,u,s,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=9;break}if(r=(0,y.default)(P,"schemas["+h+"]."+t),(n=r?r.fields:null)&&!(0,F.hasNonCacheableOptions)(c)){e.next=8;break}return e.next=6,E.getFieldsRaw(t,c);case 6:o=e.sent,n=o.val();case 8:return e.abrupt("return",(0,F.pluckResultFields)(c.fields,n));case 9:if(a=t||{},(u=(0,y.default)(P,"schemas["+h+"]"))&&!(0,F.hasNonCacheableOptions)(a)){e.next=16;break}return e.next=14,E.getFieldsRaw(a);case 14:s=e.sent,u=s.val();case 16:return e.abrupt("return",Object.keys(u).reduce(function(e,t){return Object.assign({},e,i({},t,(0,F.pluckResultFields)(a.fields,u[t].fields)))},{}));case 17:case"end":return e.stop()}},e,this)}));return e}(),subscribeRaw:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];if("string"==typeof e){r||(r=t,t={});var n=(0,F.applyOrderBy)(E.ref(e),t);return(0,F.applyFilters)(n,t).on(t.event||"value",r)}r=t,t=e||{},"object"===(void 0===r?"undefined":u(r))&&(r=e,t={});var i=(0,F.applyOrderBy)(E.ref(null),t);return(0,F.applyFilters)(i,t).on(t.event||"value",r)},subscribe:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];try{if("string"==typeof e){n&&"function"!=typeof r||(n=r,r={});var a=(0,F.pluckResultFields)(r.fields);return E.subscribeRaw(e,r,function(){var r=o(regeneratorRuntime.mark(function r(o){var u,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,d.default)(a)(i({},e,o.val()));case 2:return u=t.sent,s=u[e],t.abrupt("return",n(null,s));case 5:case"end":return t.stop()}},r,t)}));return function(e){return r.apply(this,arguments)}}())}n=r,r=e||{},"object"===(void 0===n?"undefined":u(n))&&(n=e,r={});var s=(0,F.pluckResultFields)(r.fields);return E.subscribeRaw(r,function(){var e=o(regeneratorRuntime.mark(function e(r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.default)(s)(r.val());case 2:i=e.sent,n(null,i);case 4:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}())}catch(e){return n(e)}},unsubscribe:function(){if(2===arguments.length){if(I.ALLOWED_CHILD_EVENTS.includes(arguments.length<=1?void 0:arguments[1]))return E.ref(arguments.length<=0?void 0:arguments[0]).off(arguments.length<=1?void 0:arguments[1]);throw(0,O.default)('"'+(arguments.length<=1?void 0:arguments[1])+'" is not a valid child event')}if(1===arguments.length)return E.ref(arguments.length<=0?void 0:arguments[0]).off();throw(0,O.default)('"unsubscribe" method needs to be called with min 1 argument and max 2 arguments')},set:function(e,t){if("string"!=typeof e||"object"!==(void 0===t?"undefined":u(t))&&null!==t)throw(0,O.default)('"set" called with the incorrect arguments. Check the docs for details.');var r="object"===(void 0===t?"undefined":u(t))?Object.assign({},t,{__meta__:{createdBy:(0,y.default)(a,"currentUser.uid","UNKNOWN"),createdDate:(new Date).toISOString()},id:e}):t;return E.ref(e).set(r)},update:function(e,t){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e||"object"!==(void 0===t?"undefined":u(t))&&null!==t)throw(0,O.default)('"update" called with the incorrect arguments. Check the docs for details.');var r="object"===(void 0===t?"undefined":u(t))?Object.assign({},t,{"__meta__/lastModifiedBy":(0,y.default)(a,"currentUser.uid","UNKNOWN"),"__meta__/lastModifiedDate":(new Date).toISOString(),id:e}):t;return E.ref(e).update(r)},remove:function(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw(0,O.default)('"remove" called with the incorrect arguments. Check the docs for details.');return E.ref(e).remove()},transaction:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if("number"==typeof e&&(e=e.toString()),"string"!=typeof e||"function"!=typeof t)throw(0,O.default)('"transaction" called with the incorrect arguments. Check the docs for details.');return E.ref(e).transaction(t,r)}},D={ref:function(e){if(!r)throw(0,O.default)('The Database service is not available. Make sure the "databaseURL" property is provided.');return r.ref((0,F.getSettingsRefPath)(e))},getRaw:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="string"==typeof e?e:null,n="string"==typeof e?t:e||{},i=(0,F.applyOrderBy)(D.ref(r),n);return(0,F.applyFilters)(i,n).once(n.event||"value")},get:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n,o,a,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,F.pluckResultFields)(u.fields),e.next=3,D.getRaw(t,u);case 3:return n=e.sent,o=u.needsWrap?i({},t,n.val()):n.val(),e.next=7,(0,d.default)(r)(o);case 7:return a=e.sent,e.abrupt("return",u.needsWrap?a[t]:a);case 9:case"end":return e.stop()}},e,this)}));return e}(),setLocale:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.ref("/flamelink/settings/locales").once("value");case 2:if(t=e.sent,n=t.val()){e.next=6;break}throw(0,O.default)("No supported locales found.");case 6:if(n.includes(i)){e.next=8;break}throw(0,O.default)('"'+i+'" is not a supported locale. Supported Locales: '+n.join(", "));case 8:return g=i,e.abrupt("return",g);case 10:case"end":return e.stop()}},e,this)}));return e}(),getLocale:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g);case 1:case"end":return e.stop()}},e,this)}));return e}(),setEnvironment:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.ref("/flamelink/settings/environments").once("value");case 2:if(t=e.sent,n=t.val()){e.next=6;break}throw(0,O.default)("No supported environments found.");case 6:if(n.includes(i)){e.next=8;break}throw(0,O.default)('"'+i+'" is not a supported environment. Supported Environments: '+n.join(", "));case 8:return h=i,e.abrupt("return",h);case 10:case"end":return e.stop()}},e,this)}));return e}(),getEnvironment:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h);case 1:case"end":return e.stop()}},e,this)}));return e}(),getImageSizes:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D.get("general/imageSizes",t));case 1:case"end":return e.stop()}},e,this)}));return e}(),getDefaultPermissionsGroup:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D.get("general/defaultPermissionsGroup",t));case 1:case"end":return e.stop()}},e,this)}));return e}(),getGlobals:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D.get("globals",Object.assign({},t,{needsWrap:!0})));case 1:case"end":return e.stop()}},e,this)}));return e}()},L={_getFolderId:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,n,i,o,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Root";return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}throw(0,O.default)('The Database service is not available. Make sure the "databaseURL" property is provided.');case 2:return e.next=4,r.ref((0,F.getFolderRefPath)()).once("value");case 4:if(t=e.sent,n=t.val(),i=(0,v.default)(n,{name:a})){e.next=10;break}return o=(0,v.default)(n,{name:u})||{},e.abrupt("return",o.id);case 10:return e.abrupt("return",i.id);case 11:case"end":return e.stop()}},e,this)}));return e}(),_getFolderIdFromOptions:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,r,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.folderId,r=i.folderName,n=i.folderFallback,!t){e.next=3;break}return e.abrupt("return",t);case 3:return e.abrupt("return",L._getFolderId(r,n));case 4:case"end":return e.stop()}},e,this)}));return e}(),_setFile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="object"===(void 0===e?"undefined":u(e))?Object.assign({},e,{__meta__:{createdBy:(0,y.default)(a,"currentUser.uid","UNKNOWN"),createdDate:(new Date).toISOString()}}):e;return L.fileRef(e.id).set(t)},_createSizedImage:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||!(i.path||i.width||i.maxWidth)){e.next=5;break}return e.next=3,(0,R.default)(t,i);case 3:return n=e.sent,e.abrupt("return",L.ref(r,{path:i.path,width:i.width||i.maxWidth}).put(n));case 5:throw(0,O.default)("Invalid size object supplied - please refer to https://flamelink.github.io/flamelink/#/storage?id=upload for more details on upload options.\nImage upload for supplied size skipped for file: "+r);case 6:case"end":return e.stop()}},e,this)}));return e}(),ref:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!n)throw(0,O.default)('The Storage service is not available. Make sure the "storageBucket" property is provided.');if(/:\/\//.test(e)){if(f)throw(0,O.default)("Retrieving files from URL is not supported for the admin SDK");return n.refFromURL(e)}return f?n.bucket().file((0,F.getStorageRefPath)(e,t)):n.ref((0,F.getStorageRefPath)(e,t))},folderRef:function(e){if(!r)throw(0,O.default)('The Database service is not available. Make sure the "databaseURL" property is provided.');return r.ref((0,F.getFolderRefPath)(e))},fileRef:function(e){if(!r)throw(0,O.default)('The Database service is not available. Make sure the "databaseURL" property is provided.');return r.ref((0,F.getFileRefPath)(e))},mediaRef:function(e){if(!r)throw(0,O.default)('The Database service is not available. Make sure the "databaseURL" property is provided.');return r.ref((0,F.getMediaRefPath)(e))},getRaw:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="string"==typeof e?e:null,n="string"==typeof e?t:e||{},i=(0,F.applyOrderBy)(L.mediaRef(r),n);return(0,F.applyFilters)(i,n).once(n.event||"value")},get:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n,o,a,u,s,c,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=8;break}return r=(0,F.pluckResultFields)(f.fields),e.next=4,L.getRaw(t,f);case 4:return n=e.sent,o=n.val(),a=i({},t,o),e.abrupt("return",r(a)[t]);case 8:return f=t||{},u=(0,F.pluckResultFields)(f.fields),e.next=12,L.getRaw(null,f);case 12:return s=e.sent,c=s.val(),e.abrupt("return",u(c));case 15:case"end":return e.stop()}},e,this)}));return e}(),subscribeRaw:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];if("string"==typeof e){r||(r=t,t={});var n=(0,F.applyOrderBy)(L.mediaRef(e),t);return(0,F.applyFilters)(n,t).on(t.event||"value",r)}r=t,t=e||{},"object"===(void 0===r?"undefined":u(r))&&(r=e,t={});var i=(0,F.applyOrderBy)(L.mediaRef(null),t);return(0,F.applyFilters)(i,t).on(t.event||"value",r)},subscribe:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];try{if("string"==typeof e){n&&"function"!=typeof r||(n=r,r={});var a=(0,F.pluckResultFields)(r.fields);return L.subscribeRaw(e,r,function(){var r=o(regeneratorRuntime.mark(function r(o){var u,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,d.default)(a)(i({},e,o.val()));case 2:return u=t.sent,s=u[e],t.abrupt("return",n(null,s));case 5:case"end":return t.stop()}},r,t)}));return function(e){return r.apply(this,arguments)}}())}n=r,r=e||{},"object"===(void 0===n?"undefined":u(n))&&(n=e,r={});var s=(0,F.pluckResultFields)(r.fields);return L.subscribeRaw(r,function(){var e=o(regeneratorRuntime.mark(function e(r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.default)(s)(r.val());case 2:i=e.sent,n(null,i);case 4:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}())}catch(e){return n(e)}},unsubscribe:function(){if(2===arguments.length){if(I.ALLOWED_CHILD_EVENTS.includes(arguments.length<=1?void 0:arguments[1]))return L.mediaRef(arguments.length<=0?void 0:arguments[0]).off(arguments.length<=1?void 0:arguments[1]);throw(0,O.default)('"'+(arguments.length<=1?void 0:arguments[1])+'" is not a valid child event')}if(1===arguments.length)return L.mediaRef(arguments.length<=0?void 0:arguments[0]).off();throw(0,O.default)('"unsubscribe" method needs to be called with min 1 argument and max 2 arguments')},getFoldersRaw:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,F.applyOrderBy)(L.folderRef(),e);return(0,F.applyFilters)(t,e).once(e.event||"value")},getFolders:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,r,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,F.pluckResultFields)(i.fields),r=(0,F.formatStructure)(i.structure,{idProperty:"id",parentProperty:"parentId"}),e.next=4,L.getFoldersRaw(i);case 4:return n=e.sent,e.abrupt("return",(0,d.default)(t,r,Object.values)(n.val()));case 6:case"end":return e.stop()}},e,this)}));return e}(),getFileRaw:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw(0,O.default)('"storage.getFileRaw()" should be called with at least the file ID');var r=(0,F.applyOrderBy)(L.fileRef(e),t);return(0,F.applyFilters)(r,t).once(t.event||"value")},getFile:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n,o,a,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw(0,O.default)('"storage.getFile()" should be called with at least the file ID');case 2:return r=(0,F.pluckResultFields)(u.fields),e.next=5,L.getFileRaw(t,u);case 5:return n=e.sent,o=i({},t,n.val()),e.next=9,(0,d.default)(r)(o);case 9:return a=e.sent,e.abrupt("return",a[t]);case 11:case"end":return e.stop()}},e,this)}));return e}(),getFilesRaw:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,F.applyOrderBy)(L.fileRef(),e);return(0,F.applyFilters)(t,e).once(e.event||"value")},getFiles:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,r,n,i,o,a,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={folderFallback:null},r=Object.assign(t,u,u.mediaType?{orderByChild:"type",equalTo:u.mediaType}:{}),e.next=4,L._getFolderIdFromOptions(r);case 4:return n=e.sent,i=(0,F.filterByFolderId)(n),o=(0,F.pluckResultFields)(r.fields),e.next=9,L.getFilesRaw(r);case 9:return a=e.sent,e.abrupt("return",(0,d.default)(o,i)(a.val()));case 11:case"end":return e.stop()}},e,this)}));return e}(),getURL:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n,i,o,a,s,c,l,p,d,h,v,g,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw(0,O.default)('"storage.getURL()" should be called with at least the file ID');case 2:return r=m.size,e.next=5,L.getFile(t,m);case 5:if(n=e.sent){e.next=8;break}return e.abrupt("return",n);case 8:return i=n||{},o=i.file,a=i.sizes,s=[o],"object"===(void 0===r?"undefined":u(r))?(c=r.width,l=r.height,p=r.quality,void 0!==c&&void 0!==l&&void 0!==p&&(r.path=c+"_"+l+"_"+Math.round(100*parseFloat(p,10))),r.path&&a&&a.length&&(a.find(function(e){return e.path===r.path})?s.push({path:r.path}):console.warn("[FLAMELINK]: The provided path ("+r.path+") has been ignored because it did not match any of the given file's available paths.\nAvailable paths: "+a.map(function(e){return e.path}).join(", ")))):r&&a&&a.length&&(d="device"===r?(0,F.getScreenResolution)():r,(h=a.map(function(e){return Object.assign({},e,{width:parseInt(e.width||e.maxWidth,10)})},[]).sort(function(e,t){return e.width-t.width}).find(function(e){return e.width>=d}))&&s.push(h)),e.next=13,L.ref.apply(L,s);case 13:if(v=e.sent,!f){e.next=19;break}return e.next=17,v.getSignedUrl({action:"read",expires:"01-01-2500"});case 17:return g=e.sent,e.abrupt("return",(0,y.default)(g,"[0]",""));case 19:return e.abrupt("return",v.getDownloadURL());case 20:case"end":return e.stop()}},e,this)}));return e}(),getMetadata:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw(0,O.default)('"storage.getMetadata()" should be called with at least the file ID');case 2:return e.next=4,L.getFile(t,i);case 4:if(r=e.sent){e.next=7;break}throw(0,O.default)('There is no file for File ID: "'+t+'"');case 7:return n=r.file,e.abrupt("return",L.ref(n).getMetadata());case 9:case"end":return e.stop()}},e,this)}));return e}(),updateMetadata:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw(0,O.default)('"storage.updateMetadata()" should be called with at least the file ID');case 2:return e.next=4,L.getFile(t);case 4:if(r=e.sent){e.next=7;break}throw(0,O.default)('There is no file for File ID: "'+t+'"');case 7:return n=r.file,e.abrupt("return",L.ref(n).updateMetadata(i));case 9:case"end":return e.stop()}},e,this)}));return e}(),deleteFile:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n,i,a,u=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}throw(0,O.default)('"storage.deleteFile()" is not currently supported for server-side use.');case 2:if(t){e.next=4;break}throw(0,O.default)('"storage.deleteFile()" should be called with at least the file ID');case 4:return e.next=6,L.getFile(t,s);case 6:if(r=e.sent){e.next=9;break}return e.abrupt("return",r);case 9:return n=r.file,i=r.sizes,a=L.ref(n),e.next=13,a.delete();case 13:if(!Array.isArray(i)){e.next=16;break}return e.next=16,Promise.all(i.map(function(){var e=o(regeneratorRuntime.mark(function e(t){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.width||t.maxWidth,i=t.path,r||i){e.next=4;break}return e.abrupt("return",Promise.resolve());case 4:return e.abrupt("return",L.ref(n,{width:r,path:i}).delete());case 5:case"end":return e.stop()}},e,u)}));return function(t){return e.apply(this,arguments)}}()));case 16:return e.abrupt("return",L.fileRef(t).remove());case 17:case"end":return e.stop()}},e,this)}));return e}(),upload:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n,i,o,a,s,c,l,p,d,h,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{sizes:[{width:I.DEFAULT_REQUIRED_IMAGE_SIZE}]};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}throw(0,O.default)('"storage.upload()" is not currently supported for server-side use.');case 2:return r=Date.now().toString(),n=(0,y.default)(v,"metadata",{}),i="object"===(void 0===t?"undefined":u(t))&&t.name||"string"==typeof n.name?r+"_"+(n.name||t.name):r,o=L.ref(i,v),a="string"==typeof t?"putString":"put",s=[t],e.next=10,L._getFolderIdFromOptions(v);case 10:return c=e.sent,"number"==typeof c&&(c=c.toString()),(0,b.default)(v,"metadata.customMetadata.flamelinkFileId",r),(0,b.default)(v,"metadata.customMetadata.flamelinkFolderId",c),s.push(v.metadata),"putString"===a&&v.stringEncoding&&s.splice(1,0,v.stringEncoding),l=o[a].apply(o,s),e.next=19,l;case 19:if(p=e.sent,d=/^image\//.test((0,y.default)(p,"metadata.contentType"))?"images":"files",h={id:r,file:(0,y.default)(p,"metadata.name",""),folderId:c,type:d,contentType:(0,y.default)(p,"metadata.contentType","")},v.sizes){e.next=26;break}return e.next=25,D.getImageSizes();case 25:v.sizes=e.sent;case 26:if((!v.sizes||v.sizes&&0===v.sizes.length||Array.isArray(v.sizes)&&0===v.sizes.filter(function(e){return e.width===I.DEFAULT_REQUIRED_IMAGE_SIZE||e.maxWidth===I.DEFAULT_REQUIRED_IMAGE_SIZE}).length)&&(Array.isArray(v.sizes)?v.sizes.push({width:I.DEFAULT_REQUIRED_IMAGE_SIZE}):v.sizes=[{width:I.DEFAULT_REQUIRED_IMAGE_SIZE}]),"images"!==d||"put"!==a||!Array.isArray(v.sizes)){e.next=31;break}return h.sizes=v.sizes.map(function(e){var t=e.width,r=e.height,n=e.quality;return void 0!==t&&void 0!==r&&void 0!==n?Object.assign({},e,{path:t+"_"+r+"_"+Math.round(100*n)}):e}),e.next=31,Promise.all(h.sizes.map(function(e){return L._createSizedImage(t,i,e)}));case 31:return e.next=33,L._setFile(h);case 33:return e.abrupt("return",l);case 34:case"end":return e.stop()}},e,this)}));return e}()},C={ref:function(e){if(!r)throw(0,O.default)('The Database service is not available. Make sure the "databaseURL" property is provided.');return r.ref((0,F.getContentRefPath)(e,h,g))},getRaw:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(["string","number"].includes(void 0===t?"undefined":u(t))){var n=(0,F.applyOrderBy)(C.ref(e).child(t),r);return(0,F.applyFilters)(n,r).once(r.event||"value")}var i="string"==typeof e?e:null,o="string"==typeof e?t||{}:e||{},a=(0,F.applyOrderBy)(C.ref(i),o);return(0,F.applyFilters)(a,o).once(o.event||"value")},get:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var n,o,a,s,c,f,l,p,h,v,y,m,b,x,w,_,R,j,O=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!["string","number"].includes(void 0===r?"undefined":u(r))){e.next=11;break}return n=(0,F.pluckResultFields)(O.fields),o=(0,F.populateEntry)(E,C,L,t,O.populate),e.next=5,C.getRaw(t,r,O);case 5:return a=e.sent,s=i({},r,a.val()),e.next=9,(0,d.default)(o,n)(s);case 9:return c=e.sent,e.abrupt("return",c[r]);case 11:return e.next=13,E.get(t);case 13:return f=e.sent,l=f&&"single"===f.type,p="string"==typeof t?t:null,h="string"==typeof t?r||{}:t||{},v=(0,F.pluckResultFields)(h.fields),y=(0,F.populateEntry)(E,C,L,t,h.populate),e.next=21,C.getRaw(p,h);case 21:if(m=e.sent,!p){e.next=28;break}return b=l?i({},p,m.val()):m.val(),e.next=26,(0,d.default)(y,v)(b);case 26:return x=e.sent,e.abrupt("return",l?x[p]:x);case 28:return w=m.val(),_=g,R=Object.keys(w).reduce(function(e,t){return Object.assign({},e,i({},t,w[t][_]))},{}),e.next=33,(0,d.default)(y,v)(R);case 33:return j=e.sent,e.abrupt("return",j);case 35:case"end":return e.stop()}},e,this)}));return e}(),getByFieldRaw:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=Object.assign({},n,{orderByChild:t,equalTo:r});return C.getRaw(e,i)},getByField:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=Object.assign({},n,{orderByChild:t,equalTo:r});return C.get(e,i)},subscribeRaw:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];if(["string","number"].includes(void 0===t?"undefined":u(t))){n||(n=r,r={});var i=(0,F.applyOrderBy)(C.ref(e).child(t),r);return(0,F.applyFilters)(i,r).on(r.event||"value",n)}if("object"===(void 0===t?"undefined":u(t)))n=r,r=t;else if("function"==typeof t)n=t,r={};else{if("function"!=typeof e)throw(0,O.default)("Check out the docs for the required parameters for this method");n=e,r={},e=null}var o=(0,F.applyOrderBy)(C.ref(e),r);return(0,F.applyFilters)(o,r).on(r.event||"value",n)},subscribe:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var n,a,s,c,f,l,p=this,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},v=arguments[3];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!["string","number"].includes(void 0===r?"undefined":u(r))){e.next=6;break}return v||(v=h,h={}),n=(0,F.pluckResultFields)(h.fields),a=(0,F.populateEntry)(E,C,L,t,h.populate),e.abrupt("return",C.subscribeRaw(t,r,h,function(){var e=o(regeneratorRuntime.mark(function e(t){var o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=i({},r,t.val()),e.next=3,(0,d.default)(a,n)(o);case 3:u=e.sent,v(null,u[r]);case 5:case"end":return e.stop()}},e,p)}));return function(t){return e.apply(this,arguments)}}()));case 6:if("object"!==(void 0===r?"undefined":u(r))){e.next=11;break}v=h,h=r,e.next=23;break;case 11:if("function"!=typeof r){e.next=16;break}v=r,h={},e.next=23;break;case 16:if("function"!=typeof t){e.next=22;break}v=t,h={},t=null,e.next=23;break;case 22:throw(0,O.default)("Check out the docs for the required parameters for this method");case 23:return e.next=25,E.get(t);case 25:return s=e.sent,c=s&&"single"===s.type,f=(0,F.pluckResultFields)(h.fields),l=(0,F.populateEntry)(E,C,L,t,h.populate),e.abrupt("return",C.subscribeRaw(t,h,function(){var e=o(regeneratorRuntime.mark(function e(r){var n,o,a,u,s,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return n=c?i({},t,r.val()):r.val(),e.next=4,(0,d.default)(l,f)(n);case 4:return o=e.sent,v(null,c?o[t]:o),e.abrupt("return");case 7:return a=r.val(),u=g,s=Object.keys(a).reduce(function(e,t){return Object.assign({},e,i({},t,a[t][u]))},{}),e.next=12,(0,d.default)(l,f)(s);case 12:h=e.sent,v(null,h);case 14:case"end":return e.stop()}},e,p)}));return function(t){return e.apply(this,arguments)}}()));case 32:return e.prev=32,e.t0=e.catch(0),e.abrupt("return",v(e.t0));case 35:case"end":return e.stop()}},e,this,[[0,32]])}));return e}(),unsubscribe:function(){if(3===arguments.length)return C.ref(arguments.length<=0?void 0:arguments[0]).child(arguments.length<=1?void 0:arguments[1]).off(arguments.length<=2?void 0:arguments[2]);if(2===arguments.length)return I.ALLOWED_CHILD_EVENTS.includes(arguments.length<=1?void 0:arguments[1])?C.ref(arguments.length<=0?void 0:arguments[0]).off(arguments.length<=1?void 0:arguments[1]):C.ref(arguments.length<=0?void 0:arguments[0]).child(arguments.length<=1?void 0:arguments[1]).off();if(1===arguments.length)return C.ref(arguments.length<=0?void 0:arguments[0]).off();throw(0,O.default)('"unsubscribe" method needs to be called with min 1 argument and max 3 arguments')},set:function(){function e(e,r,n){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r,n){var o,s,c,f,p,d,h,v,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.get(t);case 2:if(o=e.sent,s=o&&"single"===o.type,c=s?r:n,!(s&&("string"!=typeof t||"object"!==(void 0===c?"undefined":u(c))&&null!==c)||!s&&("string"!=typeof t||"string"!=typeof r||"object"!==(void 0===c?"undefined":u(c))&&null!==c))){e.next=7;break}throw(0,O.default)('"set" called with the incorrect arguments. Check the docs for details.');case 7:if(f=o.fields,p=void 0===f?[]:f,d=p.reduce(function(e,t){return Object.assign({},e,i({},t.key,(0,F.prepConstraintsForValidate)(t.constraints)))},{}),!(h=(0,l.default)(c,d))){e.next=12;break}return e.abrupt("return",Promise.reject(h));case 12:if(v=p.map(function(e){return e.key}),g=(0,w.default)(v),"object"===(void 0===c?"undefined":u(c))&&(c=Object.assign({},g(c),{__meta__:{createdBy:(0,y.default)(a,"currentUser.uid","UNKNOWN"),createdDate:(new Date).toISOString()},id:s?t:r})),!s){e.next=17;break}return e.abrupt("return",C.ref(t).set(c));case 17:return e.abrupt("return",C.ref(t).child(r).set(c));case 18:case"end":return e.stop()}},e,this)}));return e}(),update:function(){function e(e,r,n){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r,n){var o,s,c,f,p,d,h,v,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"number"==typeof r&&(r=r.toString()),e.next=3,E.get(t);case 3:if(o=e.sent,s=o&&"single"===o.type,c=s?r:n,!(s&&("string"!=typeof t||"object"!==(void 0===c?"undefined":u(c))&&null!==c)||!s&&("string"!=typeof t||"string"!=typeof r||"object"!==(void 0===c?"undefined":u(c))&&null!==c))){e.next=8;break}throw(0,O.default)('"update" called with the incorrect arguments. Check the docs for details.');case 8:if(f=o.fields,p=void 0===f?[]:f,d=p.reduce(function(e,t){return Object.assign({},e,i({},t.key,(0,F.prepConstraintsForValidate)(t.constraints)))},{}),h=Object.keys(c).reduce(function(e,t){var r=l.default.single(c[t],d[t]);return r?Object.assign({},e,i({},t,r)):e},{}),v=p.map(function(e){return e.key}),g=(0,w.default)(v),!Object.keys(h).length){e.next=15;break}return e.abrupt("return",Promise.reject(h));case 15:if("object"===(void 0===c?"undefined":u(c))&&(c=Object.assign({},g(c),{"__meta__/lastModifiedBy":(0,y.default)(a,"currentUser.uid","UNKNOWN"),"__meta__/lastModifiedDate":(new Date).toISOString(),id:s?t:r})),!s){e.next=18;break}return e.abrupt("return",C.ref(t).update(c));case 18:return e.abrupt("return",C.ref(t).child(r).update(c));case 19:case"end":return e.stop()}},e,this)}));return e}(),remove:function(e,t){if("number"==typeof t&&(t=t.toString()),"string"!=typeof e||"string"!=typeof t)throw(0,O.default)('"remove" called with the incorrect arguments. Check the docs for details.');return C.ref(e).child(t).remove()},transaction:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};if("number"==typeof t&&(t=t.toString()),"string"!=typeof e||"string"!=typeof t||"function"!=typeof r)throw(0,O.default)('"transaction" called with the incorrect arguments. Check the docs for details.');return C.ref(e).child(t).transaction(r,n)}},T={ref:function(e){if(!r)throw(0,O.default)('The Database service is not available. Make sure the "databaseURL" property is provided.');return r.ref((0,F.getNavigationRefPath)(e,h,g))},getRaw:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="string"==typeof e?e:null,n="string"==typeof e?t:e||{},i=(0,F.applyOrderBy)(T.ref(r),n);return(0,F.applyFilters)(i,n).once(n.event||"value")},get:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n,o,a,u,s,c,f,l,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=11;break}return e.next=3,T.getRaw(t,p);case 3:return r=e.sent,e.next=6,(0,F.pluckResultFields)(p.fields,i({},t,r.val()));case 6:if(n=e.sent,!(o=n[t])||!o.hasOwnProperty("items")){e.next=10;break}return e.abrupt("return",Object.assign({},o,{items:(0,F.formatStructure)(p.structure,{idProperty:"uuid",parentProperty:"parentIndex"},o.items)}));case 10:return e.abrupt("return",o);case 11:return a=t||{},e.next=14,T.getRaw(a);case 14:return u=e.sent,s=u.val(),c=g,f=Object.keys(s).reduce(function(e,t){return Object.assign({},e,i({},t,s[t][c]))},{}),e.next=20,(0,F.pluckResultFields)(a.fields,f);case 20:return l=e.sent,e.abrupt("return",Object.keys(l).reduce(function(e,t){var r=l[t];if(r&&r.hasOwnProperty("items")){var n=Object.assign({},r,{items:(0,F.formatStructure)(a.structure,{idProperty:"uuid",parentProperty:"parentIndex"},r.items)});return Object.assign({},e,i({},t,n))}return Object.assign({},e,i({},t,r))},{}));case 22:case"end":return e.stop()}},e,this)}));return e}(),getItemsRaw:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw(0,O.default)('"getItemsRaw" method requires a navigation reference');var r=(0,F.applyOrderBy)(T.ref(e).child("items"),t);return(0,F.applyFilters)(r,t).once(t.event||"value")},getItems:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw(0,O.default)('"getItems" method requires a navigation reference');case 2:return r=(0,F.pluckResultFields)(o.fields),n=(0,F.formatStructure)(o.structure,{idProperty:"uuid",parentProperty:"parentIndex"}),e.next=6,T.getItemsRaw(t,o);case 6:return i=e.sent,e.abrupt("return",(0,d.default)(r,n)(i.val()));case 8:case"end":return e.stop()}},e,this)}));return e}(),subscribeRaw:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];if("string"==typeof e){r||(r=t,t={});var n=(0,F.applyOrderBy)(T.ref(e),t);return(0,F.applyFilters)(n,t).on(t.event||"value",r)}r=t,t=e,"object"===(void 0===r?"undefined":u(r))&&(r=e,t={});var i=(0,F.applyOrderBy)(T.ref(null),t);return(0,F.applyFilters)(i,t).on(t.event||"value",r)},subscribe:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];try{if("string"==typeof e){n&&"function"!=typeof r||(n=r,r={});var a=(0,F.pluckResultFields)(r.fields);return T.subscribeRaw(e,r,function(){var u=o(regeneratorRuntime.mark(function o(u){var s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,d.default)(a)(i({},e,u.val()));case 2:return s=t.sent,c=s[e],c&&c.hasOwnProperty("items")&&(c.items=(0,F.formatStructure)(r.structure,{idProperty:"uuid",parentProperty:"parentIndex"},c.items)),t.abrupt("return",n(null,c));case 6:case"end":return t.stop()}},o,t)}));return function(e){return u.apply(this,arguments)}}())}n=r,r=e,"object"===(void 0===n?"undefined":u(n))&&(n=e,r={});var s=(0,F.pluckResultFields)(r.fields);return T.subscribeRaw(r,function(){var e=o(regeneratorRuntime.mark(function e(o){var a,u,c,f,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.val(),u=g,c=Object.keys(a).reduce(function(e,t){return Object.assign({},e,i({},t,a[t][u]))},{}),e.next=5,(0,d.default)(s)(c);case 5:f=e.sent,l=Object.keys(f).reduce(function(e,t){var n=f[t];if(n&&n.hasOwnProperty("items")){var o=Object.assign({},n,{items:(0,F.formatStructure)(r.structure,{idProperty:"uuid",parentProperty:"parentIndex"},n.items)});return Object.assign({},e,i({},t,o))}return Object.assign({},e,i({},t,n))},{}),n(null,l);case 8:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}())}catch(e){return n(e)}},unsubscribe:function(){if(2===arguments.length){if(I.ALLOWED_CHILD_EVENTS.includes(arguments.length<=1?void 0:arguments[1]))return T.ref(arguments.length<=0?void 0:arguments[0]).off(arguments.length<=1?void 0:arguments[1]);throw(0,O.default)('"'+(arguments.length<=1?void 0:arguments[1])+'" is not a valid child event')}if(1===arguments.length)return T.ref(arguments.length<=0?void 0:arguments[0]).off();throw(0,O.default)('"unsubscribe" method needs to be called with min 1 argument and max 2 arguments')},set:function(e,t){if("string"!=typeof e||"object"!==(void 0===t?"undefined":u(t))&&null!==t)throw(0,O.default)('"set" called with the incorrect arguments. Check the docs for details.');var r="object"===(void 0===t?"undefined":u(t))?Object.assign({},t,{__meta__:{createdBy:(0,y.default)(a,"currentUser.uid","UNKNOWN"),createdDate:(new Date).toISOString()},id:e}):t;return T.ref(e).set(r)},update:function(e,t){if("string"!=typeof e||"object"!==(void 0===t?"undefined":u(t))&&null!==t)throw(0,O.default)('"update" called with the incorrect arguments. Check the docs for details.');var r="object"===(void 0===t?"undefined":u(t))?Object.assign({},t,{"__meta__/lastModifiedBy":(0,y.default)(a,"currentUser.uid","UNKNOWN"),"__meta__/lastModifiedDate":(new Date).toISOString(),id:e}):t;return T.ref(e).update(r)},remove:function(e){if("string"!=typeof e)throw(0,O.default)('"remove" called with the incorrect arguments. Check the docs for details.');return T.ref(e).remove()},transaction:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if("string"!=typeof e||"function"!=typeof t)throw(0,O.default)('"transaction" called with the incorrect arguments. Check the docs for details.');return T.ref(e).transaction(t,r)}};return function(){E.subscribe(null,function(e,t){return e?console.error(e):(0,b.default)(P,"schemas["+h+"]",t)})}(),{name:t.name,firebaseApp:t,databaseService:r,storageService:n,authService:a,firestoreService:s,setLocale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;return(0,k.default)("app.setLocale()",'Use the "app.settings.setLocale()" method instead.'),new Promise(function(t,n){r.ref("/flamelink/settings/locales").once("value").then(function(r){var i=r.val();return i?i.includes(e)?(g=e,t(g)):n((0,O.default)('"'+e+'" is not a supported locale. Supported Locales: '+i.join(", "))):n((0,O.default)("No supported locales found."))}).catch(n)})},setEnv:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return(0,k.default)("app.setEnv()",'Use the "app.settings.setEnv()" method instead.'),new Promise(function(t,n){r.ref("/flamelink/settings/environments").once("value").then(function(r){var i=r.val();return i?i.includes(e)?(h=e,t(h)):n((0,O.default)('"'+e+'" is not a supported environment. Supported Environments: '+i.join(", "))):n((0,O.default)("No supported environments found."))}).catch(n)})},getLocale:function(){return(0,k.default)("app.getLocale()",'Use the "app.settings.getLocale()" method instead.'),Promise.resolve(g)},getEnv:function(){return(0,k.default)("app.getEnv()",'Use the "app.settings.getEnv()" method instead.'),Promise.resolve(h)},content:C,nav:T,schemas:E,storage:L,settings:D}}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r(101);var s=r(102),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(s),f=r(103),l=n(f),p=r(50),d=n(p),h=r(104),v=n(h),g=r(69),y=n(g),m=r(168),b=n(m),x=r(79),w=n(x),_=r(224),R=n(_);r(226);var j=r(99),O=n(j),S=r(227),k=n(S),F=r(228),I=r(238),P={};a.VERSION="0.17.1",e.exports=a},function(e,t){!function(t){"use strict";function r(e,t,r,n){var o=t&&t.prototype instanceof i?t:i,a=Object.create(o.prototype),u=new d(n||[]);return a._invoke=c(e,r,u),a}function n(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function a(){}function u(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function s(e){function t(r,i,o,a){var u=n(e[r],e,i);if("throw"!==u.type){var s=u.arg,c=s.value;return c&&"object"==typeof c&&m.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,o,a)},function(e){t("throw",e,o,a)}):Promise.resolve(c).then(function(e){s.value=e,o(s)},a)}a(u.arg)}function r(e,r){function n(){return new Promise(function(n,i){t(e,r,n,i)})}return i=i?i.then(n,n):n()}var i;this._invoke=r}function c(e,t,r){var i=O;return function(o,a){if(i===k)throw new Error("Generator is already running");if(i===F){if("throw"===o)throw a;return v()}for(r.method=o,r.arg=a;;){var u=r.delegate;if(u){var s=f(u,r);if(s){if(s===I)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===O)throw i=F,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=k;var c=n(e,t,r);if("normal"===c.type){if(i=r.done?F:S,c.arg===I)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=F,r.method="throw",r.arg=c.arg)}}}function f(e,t){var r=e.iterator[t.method];if(r===g){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=g,f(e,t),"throw"===t.method))return I;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return I}var i=n(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,I;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=g),t.delegate=null,I):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,I)}function l(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function p(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(l,this),this.reset(!0)}function h(e){if(e){var t=e[x];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(m.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=g,t.done=!0,t};return n.next=n}}return{next:v}}function v(){return{value:g,done:!0}}var g,y=Object.prototype,m=y.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},x=b.iterator||"@@iterator",w=b.asyncIterator||"@@asyncIterator",_=b.toStringTag||"@@toStringTag",R="object"==typeof e,j=t.regeneratorRuntime;if(j)return void(R&&(e.exports=j));j=t.regeneratorRuntime=R?e.exports:{},j.wrap=r;var O="suspendedStart",S="suspendedYield",k="executing",F="completed",I={},P={};P[x]=function(){return this};var A=Object.getPrototypeOf,E=A&&A(A(h([])));E&&E!==y&&m.call(E,x)&&(P=E);var D=a.prototype=i.prototype=Object.create(P);o.prototype=D.constructor=a,a.constructor=o,a[_]=o.displayName="GeneratorFunction",j.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},j.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,_ in e||(e[_]="GeneratorFunction")),e.prototype=Object.create(D),e},j.awrap=function(e){return{__await:e}},u(s.prototype),s.prototype[w]=function(){return this},j.AsyncIterator=s,j.async=function(e,t,n,i){var o=new s(r(e,t,n,i));return j.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},u(D),D[_]="Generator",D[x]=function(){return this},D.toString=function(){return"[object Generator]"},j.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},j.values=h,d.prototype={constructor:d,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(p),!e)for(var t in this)"t"===t.charAt(0)&&m.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=g)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=g),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=m.call(i,"catchLoc"),u=m.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&m.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,I):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),I},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),p(r),I}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;p(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=g),I}}}(function(){return this}()||Function("return this")())},function(t,r){t.exports=e},function(e,t,r){(function(e){/*!
 * validate.js 0.12.0
 *
 * (c) 2013-2017 Nicklas Ansman, 2013 Wrapp
 * Validate.js may be freely distributed under the MIT license.
 * For all details and documentation:
 * http://validatejs.org/
 */
(function(e,t,n){"use strict";var i=function(e,t,r){r=o.extend({},o.options,r);var n=o.runValidations(e,t,r);if(n.some(function(e){return o.isPromise(e.error)}))throw new Error("Use validate.async if you want support for promises");return i.processValidationResults(n,r)},o=i;o.extend=function(e){return[].slice.call(arguments,1).forEach(function(t){for(var r in t)e[r]=t[r]}),e},o.extend(i,{version:{major:0,minor:12,patch:0,metadata:null,toString:function(){var e=o.format("%{major}.%{minor}.%{patch}",o.version);return o.isEmpty(o.version.metadata)||(e+="+"+o.version.metadata),e}},Promise:"undefined"!=typeof Promise?Promise:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(e,t,r){var n,i,a,u,s,c,f,l=[];(o.isDomElement(e)||o.isJqueryElement(e))&&(e=o.collectFormValues(e));for(n in t){a=o.getDeepObjectValue(e,n),u=o.result(t[n],a,e,n,r,t);for(i in u){if(!(s=o.validators[i]))throw f=o.format("Unknown validator %{name}",{name:i}),new Error(f);c=u[i],c=o.result(c,a,e,n,r,t),c&&l.push({attribute:n,value:a,validator:i,globalOptions:r,attributes:e,options:c,error:s.call(s,a,c,n,e,r)})}}return l},processValidationResults:function(e,t){e=o.pruneEmptyErrors(e,t),e=o.expandMultipleErrors(e,t),e=o.convertErrorMessages(e,t);var r=t.format||"grouped";if("function"!=typeof o.formatters[r])throw new Error(o.format("Unknown format %{format}",t));return e=o.formatters[r](e),o.isEmpty(e)?void 0:e},async:function(e,t,r){r=o.extend({},o.async.options,r);var n=r.wrapErrors||function(e){return e};!1!==r.cleanAttributes&&(e=o.cleanAttributes(e,t));var i=o.runValidations(e,t,r);return new o.Promise(function(a,u){o.waitForResults(i).then(function(){var s=o.processValidationResults(i,r);s?u(new n(s,r,e,t)):a(e)},function(e){u(e)})})},single:function(e,t,r){return r=o.extend({},o.single.options,r,{format:"flat",fullMessages:!1}),o({single:e},{single:t},r)},waitForResults:function(e){return e.reduce(function(e,t){return o.isPromise(t.error)?e.then(function(){return t.error.then(function(e){t.error=e||null})}):e},new o.Promise(function(e){e()}))},result:function(e){var t=[].slice.call(arguments,1);return"function"==typeof e&&(e=e.apply(null,t)),e},isNumber:function(e){return"number"==typeof e&&!isNaN(e)},isFunction:function(e){return"function"==typeof e},isInteger:function(e){return o.isNumber(e)&&e%1==0},isBoolean:function(e){return"boolean"==typeof e},isObject:function(e){return e===Object(e)},isDate:function(e){return e instanceof Date},isDefined:function(e){return null!==e&&void 0!==e},isPromise:function(e){return!!e&&o.isFunction(e.then)},isJqueryElement:function(e){return e&&o.isString(e.jquery)},isDomElement:function(e){return!!e&&(!(!e.querySelectorAll||!e.querySelector)&&(!(!o.isObject(document)||e!==document)||("object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName)))},isEmpty:function(e){var t;if(!o.isDefined(e))return!0;if(o.isFunction(e))return!1;if(o.isString(e))return o.EMPTY_STRING_REGEXP.test(e);if(o.isArray(e))return 0===e.length;if(o.isDate(e))return!1;if(o.isObject(e)){for(t in e)return!1;return!0}return!1},format:o.extend(function(e,t){return o.isString(e)?e.replace(o.format.FORMAT_REGEXP,function(e,r,n){return"%"===r?"%{"+n+"}":String(t[n])}):e},{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(e){return o.isNumber(e)?100*e%1==0?""+e:parseFloat(Math.round(100*e)/100).toFixed(2):o.isArray(e)?e.map(function(e){return o.prettify(e)}).join(", "):o.isObject(e)?e.toString():(e=""+e,e.replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,function(e,t,r){return t+" "+r.toLowerCase()}).toLowerCase())},stringifyValue:function(e,t){return(t&&t.prettify||o.prettify)(e)},isString:function(e){return"string"==typeof e},isArray:function(e){return"[object Array]"==={}.toString.call(e)},isHash:function(e){return o.isObject(e)&&!o.isArray(e)&&!o.isFunction(e)},contains:function(e,t){return!!o.isDefined(e)&&(o.isArray(e)?-1!==e.indexOf(t):t in e)},unique:function(e){return o.isArray(e)?e.filter(function(e,t,r){return r.indexOf(e)==t}):e},forEachKeyInKeypath:function(e,t,r){if(o.isString(t)){var n,i="",a=!1;for(n=0;n<t.length;++n)switch(t[n]){case".":a?(a=!1,i+="."):(e=r(e,i,!1),i="");break;case"\\":a?(a=!1,i+="\\"):a=!0;break;default:a=!1,i+=t[n]}return r(e,i,!0)}},getDeepObjectValue:function(e,t){if(o.isObject(e))return o.forEachKeyInKeypath(e,t,function(e,t){if(o.isObject(e))return e[t]})},collectFormValues:function(e,t){var r,n,i,a,u,s,c={};if(o.isJqueryElement(e)&&(e=e[0]),!e)return c;for(t=t||{},a=e.querySelectorAll("input[name], textarea[name]"),r=0;r<a.length;++r)i=a.item(r),o.isDefined(i.getAttribute("data-ignored"))||(name=i.name.replace(/\./g,"\\\\."),s=o.sanitizeFormValue(i.value,t),"number"===i.type?s=s?+s:null:"checkbox"===i.type?i.attributes.value?i.checked||(s=c[name]||null):s=i.checked:"radio"===i.type&&(i.checked||(s=c[name]||null)),c[name]=s);for(a=e.querySelectorAll("select[name]"),r=0;r<a.length;++r)if(i=a.item(r),!o.isDefined(i.getAttribute("data-ignored"))){if(i.multiple){s=[];for(n in i.options)(u=i.options[n])&&u.selected&&s.push(o.sanitizeFormValue(u.value,t))}else{var f=void 0!==i.options[i.selectedIndex]?i.options[i.selectedIndex].value:"";s=o.sanitizeFormValue(f,t)}c[i.name]=s}return c},sanitizeFormValue:function(e,t){return t.trim&&o.isString(e)&&(e=e.trim()),!1!==t.nullify&&""===e?null:e},capitalize:function(e){return o.isString(e)?e[0].toUpperCase()+e.slice(1):e},pruneEmptyErrors:function(e){return e.filter(function(e){return!o.isEmpty(e.error)})},expandMultipleErrors:function(e){var t=[];return e.forEach(function(e){o.isArray(e.error)?e.error.forEach(function(r){t.push(o.extend({},e,{error:r}))}):t.push(e)}),t},convertErrorMessages:function(e,t){t=t||{};var r=[],n=t.prettify||o.prettify;return e.forEach(function(e){var i=o.result(e.error,e.value,e.attribute,e.options,e.attributes,e.globalOptions);if(!o.isString(i))return void r.push(e);"^"===i[0]?i=i.slice(1):!1!==t.fullMessages&&(i=o.capitalize(n(e.attribute))+" "+i),i=i.replace(/\\\^/g,"^"),i=o.format(i,{value:o.stringifyValue(e.value,t)}),r.push(o.extend({},e,{error:i}))}),r},groupErrorsByAttribute:function(e){var t={};return e.forEach(function(e){var r=t[e.attribute];r?r.push(e):t[e.attribute]=[e]}),t},flattenErrorsToArray:function(e){return e.map(function(e){return e.error}).filter(function(e,t,r){return r.indexOf(e)===t})},cleanAttributes:function(e,t){function r(e,t,r){return o.isObject(e[t])?e[t]:e[t]=!!r||{}}function n(e,t){if(!o.isObject(e))return e;var r,i,a=o.extend({},e);for(i in e)r=t[i],o.isObject(r)?a[i]=n(a[i],r):r||delete a[i];return a}return o.isObject(t)&&o.isObject(e)?(t=function(e){var t,n={};for(t in e)e[t]&&o.forEachKeyInKeypath(n,t,r);return n}(t),n(e,t)):{}},exposeModule:function(e,t,r,n,i){r?(n&&n.exports&&(r=n.exports=e),r.validate=e):(t.validate=e,e.isFunction(i)&&i.amd&&i([],function(){return e}))},warn:function(e){"undefined"!=typeof console&&console.warn&&console.warn("[validate.js] "+e)},error:function(e){"undefined"!=typeof console&&console.error&&console.error("[validate.js] "+e)}}),i.validators={presence:function(e,t){if(t=o.extend({},this.options,t),!1!==t.allowEmpty?!o.isDefined(e):o.isEmpty(e))return t.message||this.message||"can't be blank"},length:function(e,t,r){if(o.isDefined(e)){t=o.extend({},this.options,t);var n,i=t.is,a=t.maximum,u=t.minimum,s=t.tokenizer||function(e){return e},c=[];e=s(e);var f=e.length;return o.isNumber(f)?(o.isNumber(i)&&f!==i&&(n=t.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)",c.push(o.format(n,{count:i}))),o.isNumber(u)&&f<u&&(n=t.tooShort||this.tooShort||"is too short (minimum is %{count} characters)",c.push(o.format(n,{count:u}))),o.isNumber(a)&&f>a&&(n=t.tooLong||this.tooLong||"is too long (maximum is %{count} characters)",c.push(o.format(n,{count:a}))),c.length>0?t.message||c:void 0):(o.error(o.format("Attribute %{attr} has a non numeric value for `length`",{attr:r})),t.message||this.notValid||"has an incorrect length")}},numericality:function(e,t,r,n,i){if(o.isDefined(e)){t=o.extend({},this.options,t);var a,u,s=[],c={greaterThan:function(e,t){return e>t},greaterThanOrEqualTo:function(e,t){return e>=t},equalTo:function(e,t){return e===t},lessThan:function(e,t){return e<t},lessThanOrEqualTo:function(e,t){return e<=t},divisibleBy:function(e,t){return e%t==0}},f=t.prettify||i&&i.prettify||o.prettify;if(o.isString(e)&&t.strict){var l="^-?(0|[1-9]\\d*)";if(t.onlyInteger||(l+="(\\.\\d+)?"),l+="$",!new RegExp(l).test(e))return t.message||t.notValid||this.notValid||this.message||"must be a valid number"}if(!0!==t.noStrings&&o.isString(e)&&!o.isEmpty(e)&&(e=+e),!o.isNumber(e))return t.message||t.notValid||this.notValid||this.message||"is not a number";if(t.onlyInteger&&!o.isInteger(e))return t.message||t.notInteger||this.notInteger||this.message||"must be an integer";for(a in c)if(u=t[a],o.isNumber(u)&&!c[a](e,u)){var p="not"+o.capitalize(a),d=t[p]||this[p]||this.message||"must be %{type} %{count}";s.push(o.format(d,{count:u,type:f(a)}))}return t.odd&&e%2!=1&&s.push(t.notOdd||this.notOdd||this.message||"must be odd"),t.even&&e%2!=0&&s.push(t.notEven||this.notEven||this.message||"must be even"),s.length?t.message||s:void 0}},datetime:o.extend(function(e,t){if(!o.isFunction(this.parse)||!o.isFunction(this.format))throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");if(o.isDefined(e)){t=o.extend({},this.options,t);var r,n=[],i=t.earliest?this.parse(t.earliest,t):NaN,a=t.latest?this.parse(t.latest,t):NaN;return e=this.parse(e,t),isNaN(e)||t.dateOnly&&e%864e5!=0?(r=t.notValid||t.message||this.notValid||"must be a valid date",o.format(r,{value:arguments[0]})):(!isNaN(i)&&e<i&&(r=t.tooEarly||t.message||this.tooEarly||"must be no earlier than %{date}",r=o.format(r,{value:this.format(e,t),date:this.format(i,t)}),n.push(r)),!isNaN(a)&&e>a&&(r=t.tooLate||t.message||this.tooLate||"must be no later than %{date}",r=o.format(r,{date:this.format(a,t),value:this.format(e,t)}),n.push(r)),n.length?o.unique(n):void 0)}},{parse:null,format:null}),date:function(e,t){return t=o.extend({},t,{dateOnly:!0}),o.validators.datetime.call(o.validators.datetime,e,t)},format:function(e,t){(o.isString(t)||t instanceof RegExp)&&(t={pattern:t}),t=o.extend({},this.options,t);var r,n=t.message||this.message||"is invalid",i=t.pattern;if(o.isDefined(e))return o.isString(e)?(o.isString(i)&&(i=new RegExp(t.pattern,t.flags)),r=i.exec(e),r&&r[0].length==e.length?void 0:n):n},inclusion:function(e,t){if(o.isDefined(e)&&(o.isArray(t)&&(t={within:t}),t=o.extend({},this.options,t),!o.contains(t.within,e))){var r=t.message||this.message||"^%{value} is not included in the list";return o.format(r,{value:e})}},exclusion:function(e,t){if(o.isDefined(e)&&(o.isArray(t)&&(t={within:t}),t=o.extend({},this.options,t),o.contains(t.within,e))){var r=t.message||this.message||"^%{value} is restricted";return o.format(r,{value:e})}},email:o.extend(function(e,t){t=o.extend({},this.options,t);var r=t.message||this.message||"is not a valid email";if(o.isDefined(e))return o.isString(e)&&this.PATTERN.exec(e)?void 0:r},{PATTERN:/^[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z]{2,}$/i}),equality:function(e,t,r,n,i){if(o.isDefined(e)){o.isString(t)&&(t={attribute:t}),t=o.extend({},this.options,t);var a=t.message||this.message||"is not equal to %{attribute}";if(o.isEmpty(t.attribute)||!o.isString(t.attribute))throw new Error("The attribute must be a non empty string");var u=o.getDeepObjectValue(n,t.attribute),s=t.comparator||function(e,t){return e===t},c=t.prettify||i&&i.prettify||o.prettify;return s(e,u,t,r,n)?void 0:o.format(a,{attribute:c(t.attribute)})}},url:function(e,t){if(o.isDefined(e)){t=o.extend({},this.options,t);var r=t.message||this.message||"is not a valid url",n=t.schemes||this.schemes||["http","https"],i=t.allowLocal||this.allowLocal||!1;if(!o.isString(e))return r;var a="^(?:(?:"+n.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",u="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";i?u+="?":a+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",a+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+u+")(?::\\d{2,5})?(?:[/?#]\\S*)?$";return new RegExp(a,"i").exec(e)?void 0:r}}},i.formatters={detailed:function(e){return e},flat:o.flattenErrorsToArray,grouped:function(e){var t;e=o.groupErrorsByAttribute(e);for(t in e)e[t]=o.flattenErrorsToArray(e[t]);return e},constraint:function(e){var t;e=o.groupErrorsByAttribute(e);for(t in e)e[t]=e[t].map(function(e){return e.validator}).sort();return e}},i.exposeModule(i,this,e,t,r(49))}).call(this,t,e,r(49))}).call(t,r(10)(e))},function(e,t,r){var n=r(105),i=r(165),o=n(i);e.exports=o},function(e,t,r){function n(e){return function(t,r,n){var u=Object(t);if(!o(t)){var s=i(r,3);t=a(t),r=function(e){return s(u[e],e,u)}}var c=e(t,r,n);return c>-1?u[s?t[c]:c]:void 0}}var i=r(11),o=r(17),a=r(7);e.exports=n},function(e,t,r){function n(e){var t=o(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(r){return r===e||i(r,e,t)}}var i=r(107),o=r(156),a=r(68);e.exports=n},function(e,t,r){function n(e,t,r,n){var s=r.length,c=s,f=!n;if(null==e)return!c;for(e=Object(e);s--;){var l=r[s];if(f&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<c;){l=r[s];var p=l[0],d=e[p],h=l[1];if(f&&l[2]){if(void 0===d&&!(p in e))return!1}else{var v=new i;if(n)var g=n(d,h,p,e,t,v);if(!(void 0===g?o(h,d,a|u,n,v):g))return!1}}return!0}var i=r(23),o=r(53),a=1,u=2;e.exports=n},function(e,t){function r(){this.__data__=[],this.size=0}e.exports=r},function(e,t,r){function n(e){var t=this.__data__,r=i(t,e);return!(r<0)&&(r==t.length-1?t.pop():a.call(t,r,1),--this.size,!0)}var i=r(13),o=Array.prototype,a=o.splice;e.exports=n},function(e,t,r){function n(e){var t=this.__data__,r=i(t,e);return r<0?void 0:t[r][1]}var i=r(13);e.exports=n},function(e,t,r){function n(e){return i(this.__data__,e)>-1}var i=r(13);e.exports=n},function(e,t,r){function n(e,t){var r=this.__data__,n=i(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var i=r(13);e.exports=n},function(e,t,r){function n(){this.__data__=new i,this.size=0}var i=r(12);e.exports=n},function(e,t){function r(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}e.exports=r},function(e,t){function r(e){return this.__data__.get(e)}e.exports=r},function(e,t){function r(e){return this.__data__.has(e)}e.exports=r},function(e,t,r){function n(e,t){var r=this.__data__;if(r instanceof i){var n=r.__data__;if(!o||n.length<u-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new a(n)}return r.set(e,t),this.size=r.size,this}var i=r(12),o=r(25),a=r(27),u=200;e.exports=n},function(e,t,r){function n(e){return!(!a(e)||o(e))&&(i(e)?h:c).test(u(e))}var i=r(26),o=r(122),a=r(2),u=r(52),s=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,f=Function.prototype,l=Object.prototype,p=f.toString,d=l.hasOwnProperty,h=RegExp("^"+p.call(d).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=n},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){function n(e){var t=a.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var i=u.call(e);return n&&(t?e[s]=r:delete e[s]),i}var i=r(6),o=Object.prototype,a=o.hasOwnProperty,u=o.toString,s=i?i.toStringTag:void 0;e.exports=n},function(e,t){function r(e){return i.call(e)}var n=Object.prototype,i=n.toString;e.exports=r},function(e,t,r){function n(e){return!!o&&o in e}var i=r(123),o=function(){var e=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=n},function(e,t,r){var n=r(1),i=n["__core-js_shared__"];e.exports=i},function(e,t){function r(e,t){return null==e?void 0:e[t]}e.exports=r},function(e,t,r){function n(){this.size=0,this.__data__={hash:new i,map:new(a||o),string:new i}}var i=r(126),o=r(12),a=r(25);e.exports=n},function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var i=r(127),o=r(128),a=r(129),u=r(130),s=r(131);n.prototype.clear=i,n.prototype.delete=o,n.prototype.get=a,n.prototype.has=u,n.prototype.set=s,e.exports=n},function(e,t,r){function n(){this.__data__=i?i(null):{},this.size=0}var i=r(14);e.exports=n},function(e,t){function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=r},function(e,t,r){function n(e){var t=this.__data__;if(i){var r=t[e];return r===o?void 0:r}return u.call(t,e)?t[e]:void 0}var i=r(14),o="__lodash_hash_undefined__",a=Object.prototype,u=a.hasOwnProperty;e.exports=n},function(e,t,r){function n(e){var t=this.__data__;return i?void 0!==t[e]:a.call(t,e)}var i=r(14),o=Object.prototype,a=o.hasOwnProperty;e.exports=n},function(e,t,r){function n(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=i&&void 0===t?o:t,this}var i=r(14),o="__lodash_hash_undefined__";e.exports=n},function(e,t,r){function n(e){var t=i(this,e).delete(e);return this.size-=t?1:0,t}var i=r(15);e.exports=n},function(e,t){function r(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=r},function(e,t,r){function n(e){return i(this,e).get(e)}var i=r(15);e.exports=n},function(e,t,r){function n(e){return i(this,e).has(e)}var i=r(15);e.exports=n},function(e,t,r){function n(e,t){var r=i(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var i=r(15);e.exports=n},function(e,t,r){function n(e,t,r,n,g,m){var b=c(e),x=c(t),w=b?h:s(e),_=x?h:s(t);w=w==d?v:w,_=_==d?v:_;var R=w==v,j=_==v,O=w==_;if(O&&f(e)){if(!f(t))return!1;b=!0,R=!1}if(O&&!R)return m||(m=new i),b||l(e)?o(e,t,r,n,g,m):a(e,t,w,r,n,g,m);if(!(r&p)){var S=R&&y.call(e,"__wrapped__"),k=j&&y.call(t,"__wrapped__");if(S||k){var F=S?e.value():e,I=k?t.value():t;return m||(m=new i),g(F,I,r,n,m)}}return!!O&&(m||(m=new i),u(e,t,r,n,g,m))}var i=r(23),o=r(54),a=r(143),u=r(144),s=r(65),c=r(0),f=r(31),l=r(62),p=1,d="[object Arguments]",h="[object Array]",v="[object Object]",g=Object.prototype,y=g.hasOwnProperty;e.exports=n},function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new i;++t<r;)this.add(e[t])}var i=r(27),o=r(139),a=r(140);n.prototype.add=n.prototype.push=o,n.prototype.has=a,e.exports=n},function(e,t){function r(e){return this.__data__.set(e,n),this}var n="__lodash_hash_undefined__";e.exports=r},function(e,t){function r(e){return this.__data__.has(e)}e.exports=r},function(e,t){function r(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}e.exports=r},function(e,t){function r(e,t){return e.has(t)}e.exports=r},function(e,t,r){function n(e,t,r,n,i,R,O){switch(r){case _:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!R(new o(e),new o(t)));case p:case d:case g:return a(+e,+t);case h:return e.name==t.name&&e.message==t.message;case y:case b:return e==t+"";case v:var S=s;case m:var k=n&f;if(S||(S=c),e.size!=t.size&&!k)return!1;var F=O.get(e);if(F)return F==t;n|=l,O.set(e,t);var I=u(S(e),S(t),n,i,R,O);return O.delete(e),I;case x:if(j)return j.call(e)==j.call(t)}return!1}var i=r(6),o=r(55),a=r(24),u=r(54),s=r(56),c=r(57),f=1,l=2,p="[object Boolean]",d="[object Date]",h="[object Error]",v="[object Map]",g="[object Number]",y="[object RegExp]",m="[object Set]",b="[object String]",x="[object Symbol]",w="[object ArrayBuffer]",_="[object DataView]",R=i?i.prototype:void 0,j=R?R.valueOf:void 0;e.exports=n},function(e,t,r){function n(e,t,r,n,a,s){var c=r&o,f=i(e),l=f.length;if(l!=i(t).length&&!c)return!1;for(var p=l;p--;){var d=f[p];if(!(c?d in t:u.call(t,d)))return!1}var h=s.get(e);if(h&&s.get(t))return h==t;var v=!0;s.set(e,t),s.set(t,e);for(var g=c;++p<l;){d=f[p];var y=e[d],m=t[d];if(n)var b=c?n(m,y,d,t,e,s):n(y,m,d,e,t,s);if(!(void 0===b?y===m||a(y,m,r,n,s):b)){v=!1;break}g||(g="constructor"==d)}if(v&&!g){var x=e.constructor,w=t.constructor;x!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w)&&(v=!1)}return s.delete(e),s.delete(t),v}var i=r(58),o=1,a=Object.prototype,u=a.hasOwnProperty;e.exports=n},function(e,t){function r(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}e.exports=r},function(e,t){function r(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}e.exports=r},function(e,t,r){function n(e){return o(e)&&i(e)==a}var i=r(5),o=r(4),a="[object Arguments]";e.exports=n},function(e,t){function r(){return!1}e.exports=r},function(e,t,r){function n(e){return a(e)&&o(e.length)&&!!u[i(e)]}var i=r(5),o=r(32),a=r(4),u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u["[object Arguments]"]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u["[object Function]"]=u["[object Map]"]=u["[object Number]"]=u["[object Object]"]=u["[object RegExp]"]=u["[object Set]"]=u["[object String]"]=u["[object WeakMap]"]=!1,e.exports=n},function(e,t){function r(e){return function(t){return e(t)}}e.exports=r},function(e,t,r){(function(e){var n=r(51),i="object"==typeof t&&t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i,u=a&&n.process,s=function(){try{return u&&u.binding&&u.binding("util")}catch(e){}}();e.exports=s}).call(t,r(10)(e))},function(e,t,r){var n=r(64),i=n(Object.keys,Object);e.exports=i},function(e,t,r){var n=r(3),i=r(1),o=n(i,"DataView");e.exports=o},function(e,t,r){var n=r(3),i=r(1),o=n(i,"Promise");e.exports=o},function(e,t,r){var n=r(3),i=r(1),o=n(i,"Set");e.exports=o},function(e,t,r){function n(e){for(var t=o(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,i(a)]}return t}var i=r(67),o=r(7);e.exports=n},function(e,t,r){function n(e,t){return u(e)&&s(t)?c(f(e),t):function(r){var n=o(r,e);return void 0===n&&n===t?a(r,e):i(t,n,l|p)}}var i=r(53),o=r(69),a=r(74),u=r(35),s=r(67),c=r(68),f=r(8),l=1,p=2;e.exports=n},function(e,t,r){function n(e){var t=i(e,function(e){return r.size===o&&r.clear(),e}),r=t.cache;return t}var i=r(71),o=500;e.exports=n},function(e,t,r){function n(e){if("string"==typeof e)return e;if(a(e))return o(e,n)+"";if(u(e))return f?f.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}var i=r(6),o=r(73),a=r(0),u=r(9),s=1/0,c=i?i.prototype:void 0,f=c?c.toString:void 0;e.exports=n},function(e,t){function r(e,t){return null!=e&&t in Object(e)}e.exports=r},function(e,t,r){function n(e,t,r){t=i(t,e);for(var n=-1,f=t.length,l=!1;++n<f;){var p=c(t[n]);if(!(l=null!=e&&r(e,p)))break;e=e[p]}return l||++n!=f?l:!!(f=null==e?0:e.length)&&s(f)&&u(p,f)&&(a(e)||o(e))}var i=r(18),o=r(30),a=r(0),u=r(16),s=r(32),c=r(8);e.exports=n},function(e,t,r){function n(e){return a(e)?i(u(e)):o(e)}var i=r(163),o=r(164),a=r(35),u=r(8);e.exports=n},function(e,t){function r(e){return function(t){return null==t?void 0:t[e]}}e.exports=r},function(e,t,r){function n(e){return function(t){return i(t,e)}}var i=r(34);e.exports=n},function(e,t,r){function n(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var s=null==r?0:a(r);return s<0&&(s=u(n+s,0)),i(e,o(t,3),s)}var i=r(75),o=r(11),a=r(37),u=Math.max;e.exports=n},function(e,t,r){function n(e){if(!e)return 0===e?e:0;if((e=i(e))===o||e===-o){return(e<0?-1:1)*a}return e===e?e:0}var i=r(167),o=1/0,a=1.7976931348623157e308;e.exports=n},function(e,t,r){function n(e){if("number"==typeof e)return e;if(o(e))return a;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(u,"");var r=c.test(e);return r||f.test(e)?l(e.slice(2),r?2:8):s.test(e)?a:+e}var i=r(2),o=r(9),a=NaN,u=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,f=/^0o[0-7]+$/i,l=parseInt;e.exports=n},function(e,t,r){function n(e,t,r){return null==e?e:i(e,t,r)}var i=r(76);e.exports=n},function(e,t,r){function n(e,t,r){return i(o,e,t,r)}var i=r(170),o=r(172);e.exports=n},function(e,t,r){function n(e,t){return 2==t?function(t,r){return e.apply(void 0,arguments)}:function(t){return e.apply(void 0,arguments)}}function i(e,t){return 2==t?function(t,r){return e(t,r)}:function(t){return e(t)}}function o(e){for(var t=e?e.length:0,r=Array(t);t--;)r[t]=e[t];return r}function a(e){return function(t){return e({},t)}}function u(e,t){return function(){for(var r=arguments.length,n=r-1,i=Array(r);r--;)i[r]=arguments[r];var o=i[t],a=i.slice(0,t);return o&&p.apply(a,o),t!=n&&p.apply(a,i.slice(t+1)),e.apply(this,a)}}function s(e,t){return function(){var r=arguments.length;if(r){for(var n=Array(r);r--;)n[r]=arguments[r];var i=n[0]=t.apply(void 0,n);return e.apply(void 0,n),i}}}function c(e,t,r,p){function d(e,t){if(k.cap){var r=f.iterateeRearg[e];if(r)return w(t,r);var n=!O&&f.iterateeAry[e];if(n)return x(t,n)}return t}function h(e,t,r){return F||k.curry&&r>1?M(t,r):t}function v(e,t,r){if(k.fixed&&(I||!f.skipFixed[e])){var n=f.methodSpread[e],i=n&&n.start;return void 0===i?L(t,r):u(t,i)}return t}function g(e,t,r){return k.rearg&&r>1&&(P||!f.skipRearg[e])?z(t,f.methodRearg[e]||f.aryRearg[r]):t}function y(e,t){t=V(t);for(var r=-1,n=t.length,i=n-1,o=T(Object(e)),a=o;null!=a&&++r<n;){var u=t[r],s=a[u];null!=s&&(a[t[r]]=T(r==i?s:Object(s))),a=a[u]}return o}function m(e){return $.runInContext.convert(e)(void 0)}function b(e,t){var r=f.aliasToReal[e]||e,n=f.remap[r]||r,i=p;return function(e){var o=O?E:D,a=O?E[n]:t,u=C(C({},i),e);return c(o,r,a,u)}}function x(e,t){return _(e,function(e){return"function"==typeof e?i(e,t):e})}function w(e,t){return _(e,function(e){var r=t.length;return n(z(i(e,r),t),r)})}function _(e,t){return function(){var r=arguments.length;if(!r)return e();for(var n=Array(r);r--;)n[r]=arguments[r];var i=k.rearg?0:r-1;return n[i]=t(n[i]),e.apply(void 0,n)}}function R(e,t){var r,n=f.aliasToReal[e]||e,i=t,u=K[n];return u?i=u(t):k.immutable&&(f.mutate.array[n]?i=s(t,o):f.mutate.object[n]?i=s(t,a(t)):f.mutate.set[n]&&(i=s(t,y))),B(q,function(e){return B(f.aryMethod[e],function(t){if(n==t){var o=f.methodSpread[n],a=o&&o.afterRearg;return r=a?v(n,g(n,i,e),e):g(n,v(n,i,e),e),r=d(n,r),r=h(n,r,e),!1}}),!r}),r||(r=i),r==t&&(r=F?M(r,1):function(){return t.apply(this,arguments)}),r.convert=b(n,t),f.placeholder[n]&&(j=!0,r.placeholder=t.placeholder=A),r}var j,O="function"==typeof t,S=t===Object(t);if(S&&(p=r,r=t,t=void 0),null==r)throw new TypeError;p||(p={});var k={cap:!("cap"in p)||p.cap,curry:!("curry"in p)||p.curry,fixed:!("fixed"in p)||p.fixed,immutable:!("immutable"in p)||p.immutable,rearg:!("rearg"in p)||p.rearg},F="curry"in p&&p.curry,I="fixed"in p&&p.fixed,P="rearg"in p&&p.rearg,A=O?r:l,E=O?r.runInContext():void 0,D=O?r:{ary:e.ary,assign:e.assign,clone:e.clone,curry:e.curry,forEach:e.forEach,isArray:e.isArray,isFunction:e.isFunction,iteratee:e.iteratee,keys:e.keys,rearg:e.rearg,toInteger:e.toInteger,toPath:e.toPath},L=D.ary,C=D.assign,T=D.clone,M=D.curry,B=D.forEach,U=D.isArray,N=D.isFunction,W=D.keys,z=D.rearg,G=D.toInteger,V=D.toPath,q=W(f.aryMethod),K={castArray:function(e){return function(){var t=arguments[0];return U(t)?e(o(t)):e.apply(void 0,arguments)}},iteratee:function(e){return function(){var t=arguments[0],r=arguments[1],n=e(t,r),o=n.length;return k.cap&&"number"==typeof r?(r=r>2?r-2:1,o&&o<=r?n:i(n,r)):n}},mixin:function(e){return function(t){var r=this;if(!N(r))return e(r,Object(t));var n=[];return B(W(t),function(e){N(t[e])&&n.push([e,r.prototype[e]])}),e(r,Object(t)),B(n,function(e){var t=e[1];N(t)?r.prototype[e[0]]=t:delete r.prototype[e[0]]}),r}},nthArg:function(e){return function(t){var r=t<0?1:G(t)+1;return M(e(t),r)}},rearg:function(e){return function(t,r){var n=r?r.length:0;return M(e(t,r),n)}},runInContext:function(t){return function(r){return c(e,t(r),p)}}};if(!S)return R(t,r);var $=r,H=[];return B(q,function(e){B(f.aryMethod[e],function(e){var t=$[f.remap[e]||e];t&&H.push([e,R(e,t)])})}),B(W($),function(e){var t=$[e];if("function"==typeof t){for(var r=H.length;r--;)if(H[r][0]==e)return;t.convert=b(e,t),H.push([e,t])}}),B(H,function(e){$[e[0]]=e[1]}),$.convert=m,j&&($.placeholder=A),B(W($),function(e){B(f.realToAlias[e]||[],function(t){$[t]=$[e]})}),$}var f=r(171),l=r(80),p=Array.prototype.push;e.exports=c},function(e,t){t.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},t.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},t.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},t.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},t.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},t.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},t.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},t.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},t.placeholder={bind:!0,bindKey:!0,curry:!0,curryRight:!0,partial:!0,partialRight:!0},t.realToAlias=function(){var e=Object.prototype.hasOwnProperty,r=t.aliasToReal,n={};for(var i in r){var o=r[i];e.call(n,o)?n[o].push(i):n[o]=[i]}return n}(),t.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},t.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},t.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}},function(e,t,r){e.exports={ary:r(173),assign:r(94),clone:r(195),curry:r(97),forEach:r(43),isArray:r(0),isFunction:r(26),iteratee:r(214),keys:r(63),rearg:r(215),toInteger:r(37),toPath:r(220)}},function(e,t,r){function n(e,t,r){return t=r?void 0:t,t=e&&null==t?e.length:t,i(e,o,void 0,void 0,void 0,void 0,t)}var i=r(39),o=128;e.exports=n},function(e,t,r){function n(e,t,r){function n(){return(this&&this!==o&&this instanceof n?s:e).apply(u?r:this,arguments)}var u=t&a,s=i(e);return n}var i=r(19),o=r(1),a=1;e.exports=n},function(e,t,r){function n(e,t,r){function n(){for(var o=arguments.length,p=Array(o),d=o,h=s(n);d--;)p[d]=arguments[d];var v=o<3&&p[0]!==h&&p[o-1]!==h?[]:c(p,h);return(o-=v.length)<r?u(e,t,a,n.placeholder,void 0,p,v,void 0,void 0,r-o):i(this&&this!==f&&this instanceof n?l:e,this,p)}var l=o(e);return n}var i=r(40),o=r(19),a=r(83),u=r(86),s=r(93),c=r(44),f=r(1);e.exports=n},function(e,t){function r(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}e.exports=r},function(e,t,r){function n(e){var t=a(e),r=u[t];if("function"!=typeof r||!(t in i.prototype))return!1;if(e===r)return!0;var n=o(r);return!!n&&e===n[0]}var i=r(41),o=r(87),a=r(179),u=r(181);e.exports=n},function(e,t){function r(){}e.exports=r},function(e,t,r){function n(e){for(var t=e.name+"",r=i[t],n=a.call(i,t)?r.length:0;n--;){var o=r[n],u=o.func;if(null==u||u==e)return o.name}return t}var i=r(180),o=Object.prototype,a=o.hasOwnProperty;e.exports=n},function(e,t){var r={};e.exports=r},function(e,t,r){function n(e){if(s(e)&&!u(e)&&!(e instanceof i)){if(e instanceof o)return e;if(l.call(e,"__wrapped__"))return c(e)}return new o(e)}var i=r(41),o=r(88),a=r(42),u=r(0),s=r(4),c=r(182),f=Object.prototype,l=f.hasOwnProperty;n.prototype=a.prototype,n.prototype.constructor=n,e.exports=n},function(e,t,r){function n(e){if(e instanceof i)return e.clone();var t=new o(e.__wrapped__,e.__chain__);return t.__actions__=a(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var i=r(41),o=r(88),a=r(21);e.exports=n},function(e,t){function r(e){var t=e.match(n);return t?t[1].split(i):[]}var n=/\{\n\/\* \[wrapped with (.+)\] \*/,i=/,? & /;e.exports=r},function(e,t){function r(e,t){var r=t.length;if(!r)return e;var i=r-1;return t[i]=(r>1?"& ":"")+t[i],t=t.join(r>2?", ":" "),e.replace(n,"{\n/* [wrapped with "+t+"] */\n")}var n=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;e.exports=r},function(e,t,r){var n=r(186),i=r(78),o=r(36),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:o;e.exports=a},function(e,t){function r(e){return function(){return e}}e.exports=r},function(e,t,r){function n(e,t){return i(a,function(r){var n="_."+r[0];t&r[1]&&!o(e,n)&&e.push(n)}),e.sort()}var i=r(43),o=r(188),a=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];e.exports=n},function(e,t,r){function n(e,t){return!!(null==e?0:e.length)&&i(e,t,0)>-1}var i=r(189);e.exports=n},function(e,t,r){function n(e,t,r){return t===t?a(e,t,r):i(e,o,r)}var i=r(75),o=r(190),a=r(191);e.exports=n},function(e,t){function r(e){return e!==e}e.exports=r},function(e,t){function r(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}e.exports=r},function(e,t,r){function n(e,t){for(var r=e.length,n=a(t.length,r),u=i(e);n--;){var s=t[n];e[n]=o(s,r)?u[s]:void 0}return e}var i=r(21),o=r(16),a=Math.min;e.exports=n},function(e,t,r){function n(e,t,r,n){function s(){for(var t=-1,o=arguments.length,u=-1,l=n.length,p=Array(l+o),d=this&&this!==a&&this instanceof s?f:e;++u<l;)p[u]=n[u];for(;o--;)p[u++]=arguments[++t];return i(d,c?r:this,p)}var c=t&u,f=o(e);return s}var i=r(40),o=r(19),a=r(1),u=1;e.exports=n},function(e,t,r){function n(e,t){var r=e[1],n=t[1],v=r|n,g=v<(s|c|p),y=n==p&&r==l||n==p&&r==d&&e[7].length<=t[8]||n==(p|d)&&t[7].length<=t[8]&&r==l;if(!g&&!y)return e;n&s&&(e[2]=t[2],v|=r&s?0:f);var m=t[3];if(m){var b=e[3];e[3]=b?i(b,m,t[4]):m,e[4]=b?a(e[3],u):t[4]}return m=t[5],m&&(b=e[5],e[5]=b?o(b,m,t[6]):m,e[6]=b?a(e[5],u):t[6]),m=t[7],m&&(e[7]=m),n&p&&(e[8]=null==e[8]?t[8]:h(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=v,e}var i=r(84),o=r(85),a=r(44),u="__lodash_placeholder__",s=1,c=2,f=4,l=8,p=128,d=256,h=Math.min;e.exports=n},function(e,t,r){function n(e){return i(e,o)}var i=r(45),o=4;e.exports=n},function(e,t,r){function n(e,t){return e&&i(t,o(t),e)}var i=r(22),o=r(95);e.exports=n},function(e,t,r){function n(e){if(!i(e))return a(e);var t=o(e),r=[];for(var n in e)("constructor"!=n||!t&&s.call(e,n))&&r.push(n);return r}var i=r(2),o=r(33),a=r(198),u=Object.prototype,s=u.hasOwnProperty;e.exports=n},function(e,t){function r(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}e.exports=r},function(e,t,r){(function(e){function n(e,t){if(t)return e.slice();var r=e.length,n=c?c(r):new e.constructor(r);return e.copy(n),n}var i=r(1),o="object"==typeof t&&t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,u=a&&a.exports===o,s=u?i.Buffer:void 0,c=s?s.allocUnsafe:void 0;e.exports=n}).call(t,r(10)(e))},function(e,t,r){function n(e,t){return i(e,o(e),t)}var i=r(22),o=r(29);e.exports=n},function(e,t,r){function n(e,t){return i(e,o(e),t)}var i=r(22),o=r(96);e.exports=n},function(e,t,r){function n(e){return i(e,a,o)}var i=r(59),o=r(96),a=r(95);e.exports=n},function(e,t){function r(e){var t=e.length,r=e.constructor(t);return t&&"string"==typeof e[0]&&i.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var n=Object.prototype,i=n.hasOwnProperty;e.exports=r},function(e,t,r){function n(e,t,r,n){var P=e.constructor;switch(t){case b:return i(e);case l:case p:return new P(+e);case x:return o(e,n);case w:case _:case R:case j:case O:case S:case k:case F:case I:return f(e,n);case d:return a(e,n,r);case h:case y:return new P(e);case v:return u(e);case g:return s(e,n,r);case m:return c(e)}}var i=r(47),o=r(205),a=r(206),u=r(208),s=r(209),c=r(211),f=r(212),l="[object Boolean]",p="[object Date]",d="[object Map]",h="[object Number]",v="[object RegExp]",g="[object Set]",y="[object String]",m="[object Symbol]",b="[object ArrayBuffer]",x="[object DataView]",w="[object Float32Array]",_="[object Float64Array]",R="[object Int8Array]",j="[object Int16Array]",O="[object Int32Array]",S="[object Uint8Array]",k="[object Uint8ClampedArray]",F="[object Uint16Array]",I="[object Uint32Array]";e.exports=n},function(e,t,r){function n(e,t){var r=t?i(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var i=r(47);e.exports=n},function(e,t,r){function n(e,t,r){var n=t?r(a(e),u):a(e);return o(n,i,new e.constructor)}var i=r(207),o=r(48),a=r(56),u=1;e.exports=n},function(e,t){function r(e,t){return e.set(t[0],t[1]),e}e.exports=r},function(e,t){function r(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}var n=/\w*$/;e.exports=r},function(e,t,r){function n(e,t,r){var n=t?r(a(e),u):a(e);return o(n,i,new e.constructor)}var i=r(210),o=r(48),a=r(57),u=1;e.exports=n},function(e,t){function r(e,t){return e.add(t),e}e.exports=r},function(e,t,r){function n(e){return a?Object(a.call(e)):{}}var i=r(6),o=i?i.prototype:void 0,a=o?o.valueOf:void 0;e.exports=n},function(e,t,r){function n(e,t){var r=t?i(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var i=r(47);e.exports=n},function(e,t,r){function n(e){return"function"!=typeof e.constructor||a(e)?{}:i(o(e))}var i=r(20),o=r(46),a=r(33);e.exports=n},function(e,t,r){function n(e){return o("function"==typeof e?e:i(e,a))}var i=r(45),o=r(11),a=1;e.exports=n},function(e,t,r){var n=r(39),i=r(98),o=i(function(e,t){return n(e,256,void 0,void 0,void 0,t)});e.exports=o},function(e,t,r){function n(e){return(null==e?0:e.length)?i(e,1):[]}var i=r(217);e.exports=n},function(e,t,r){function n(e,t,r,a,u){var s=-1,c=e.length;for(r||(r=o),u||(u=[]);++s<c;){var f=e[s];t>0&&r(f)?t>1?n(f,t-1,r,a,u):i(u,f):a||(u[u.length]=f)}return u}var i=r(28),o=r(218);e.exports=n},function(e,t,r){function n(e){return a(e)||o(e)||!!(u&&e&&e[u])}var i=r(6),o=r(30),a=r(0),u=i?i.isConcatSpreadable:void 0;e.exports=n},function(e,t,r){function n(e,t,r){return t=o(void 0===t?e.length-1:t,0),function(){for(var n=arguments,a=-1,u=o(n.length-t,0),s=Array(u);++a<u;)s[a]=n[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=n[a];return c[t]=r(s),i(e,this,c)}}var i=r(40),o=Math.max;e.exports=n},function(e,t,r){function n(e){return a(e)?i(e,c):u(e)?[e]:o(s(f(e)))}var i=r(73),o=r(21),a=r(0),u=r(9),s=r(70),c=r(8),f=r(72);e.exports=n},function(e,t,r){var n=r(222),i=r(98),o=i(function(e,t){return null==e?{}:n(e,t)});e.exports=o},function(e,t,r){function n(e,t){return i(e,t,function(t,r){return o(e,r)})}var i=r(223),o=r(74);e.exports=n},function(e,t,r){function n(e,t,r){for(var n=-1,u=t.length,s={};++n<u;){var c=t[n],f=i(e,c);r(f,c)&&o(s,a(c,e),f)}return s}var i=r(34),o=r(76),a=r(18);e.exports=n},function(e,t,r){"use strict";function n(e,t){return new Promise(function(r){var n=document.createElement("img"),o=new FileReader,a=Object.assign({},d,t);o.onload=function(e){n.src=e.target.result,n.onload=function(){a.autoRotate&&(a.debug&&console.log("browser-image-resizer: detecting image orientation..."),"function"==typeof p.default.getData&&"function"==typeof p.default.getTag?p.default.getData(n,function(){var e=p.default.getTag(this,"Orientation");a.debug&&console.log("browser-image-resizer: image orientation from EXIF tag = "+e),r(i(n,a,e))}):(console.error("browser-image-resizer: can't read EXIF data, the Exif.js library not found"),r(i(n,a))))}},o.readAsDataURL(e)})}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=document.createElement("canvas");n.width=e.width,n.height=e.height;var i=n.getContext("2d");i.save(),a(n,i,r,e);for(var f=o(t,n);n.width>=2*f;)n=c(n);n.width>f&&(n=s(n,t));var l=n.toDataURL("image/jpeg",t.quality);return"function"==typeof t.onScale&&t.onScale(l),u(l)}function o(e,t){var r=t.width/t.height,n=Math.min(e.maxWidth,r*e.maxHeight);return e.maxSize>0&&e.maxSize<t.width*t.height/1e3&&(n=Math.min(n,Math.floor(Math.sqrt(e.maxSize*r)))),e.scaleRatio&&(n=Math.min(n,Math.floor(e.scaleRatio*t.width))),e.debug&&(console.log("browser-image-resizer: original image size = "+t.width+" px (width) X "+t.height+" px (height)"),console.log("browser-image-resizer: scaled image size = "+n+" px (width) X "+Math.floor(n/r)+" px (height)")),n<=0&&(n=1,console.warning("browser-image-resizer: image size is too small")),n}function a(e,t,r,n){var i=e.width,o=e.style.width,a=e.height,u=e.style.height;switch(r>4&&(e.width=a,e.style.width=u,e.height=i,e.style.height=o),r){case 2:t.translate(i,0),t.scale(-1,1);break;case 3:t.translate(i,a),t.rotate(Math.PI);break;case 4:t.translate(0,a),t.scale(1,-1);break;case 5:t.rotate(.5*Math.PI),t.scale(1,-1);break;case 6:t.rotate(.5*Math.PI),t.translate(0,-a);break;case 7:t.rotate(.5*Math.PI),t.translate(i,-a),t.scale(-1,1);break;case 8:t.rotate(-.5*Math.PI),t.translate(-i,0)}t.drawImage(n,0,0),t.restore()}function u(e){for(var t=atob(e.split(",")[1]),r=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),i=new Uint8Array(n),o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return new Blob([n],{type:r})}function s(e,t){var r=document.createElement("canvas"),n=t.maxWidth/e.width;r.width=e.width*n,r.height=e.height*n;var i=e.getContext("2d").getImageData(0,0,e.width,e.height),o=r.getContext("2d").createImageData(r.width,r.height);return f(i,o,n),r.getContext("2d").putImageData(o,0,0),r}function c(e){var t=document.createElement("canvas");return t.width=e.width/2,t.height=e.height/2,t.getContext("2d").drawImage(e,0,0,t.width,t.height),t}function f(e,t,r){function n(e,t,r,n,i,o){var a=1-i,u=1-o;return e*a*u+t*i*u+r*a*o+n*i*o}var i,o,a,u,s,c,f,l,p,d,h,v,g,y,m,b,x,w,_;for(i=0;i<t.height;++i)for(a=i/r,u=Math.floor(a),s=Math.ceil(a)>e.height-1?e.height-1:Math.ceil(a),o=0;o<t.width;++o)c=o/r,f=Math.floor(c),l=Math.ceil(c)>e.width-1?e.width-1:Math.ceil(c),p=4*(o+t.width*i),d=4*(f+e.width*u),h=4*(l+e.width*u),v=4*(f+e.width*s),g=4*(l+e.width*s),y=c-f,m=a-u,b=n(e.data[d],e.data[h],e.data[v],e.data[g],y,m),t.data[p]=b,x=n(e.data[d+1],e.data[h+1],e.data[v+1],e.data[g+1],y,m),t.data[p+1]=x,w=n(e.data[d+2],e.data[h+2],e.data[v+2],e.data[g+2],y,m),t.data[p+2]=w,_=n(e.data[d+3],e.data[h+3],e.data[v+3],e.data[g+3],y,m),t.data[p+3]=_}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,t.scaleImage=i;var l=r(225),p=function(e){return e&&e.__esModule?e:{default:e}}(l),d={quality:.5,maxWidth:800,maxHeight:600,autoRotate:!0,debug:!1}},function(e,t,r){"use strict";var n,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){function r(e){return!!e.exifdata}function a(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var r=atob(e),n=r.length,i=new ArrayBuffer(n),o=new Uint8Array(i),a=0;a<n;a++)o[a]=r.charCodeAt(a);return i}function u(e,t){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="blob",r.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},r.send()}function s(e,t){function r(r){var n=c(r),i=f(r);e.exifdata=n||{},e.iptcdata=i||{},t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src)){var n=a(e.src);r(n)}else if(/^blob\:/i.test(e.src)){var i=new FileReader;i.onload=function(e){r(e.target.result)},u(e.src,function(e){i.readAsArrayBuffer(e)})}else{var o=new XMLHttpRequest;o.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";r(o.response),o=null},o.open("GET",e.src,!0),o.responseType="arraybuffer",o.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){var i=new FileReader;i.onload=function(e){m&&console.log("Got file of length "+e.target.result.byteLength),r(e.target.result)},i.readAsArrayBuffer(e)}}function c(e){var t=new DataView(e);if(m&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return m&&console.log("Not a valid JPEG"),!1;for(var r,n=2,i=e.byteLength;n<i;){if(255!=t.getUint8(n))return m&&console.log("Not a valid marker at offset "+n+", found: "+t.getUint8(n)),!1;if(r=t.getUint8(n+1),m&&console.log(r),225==r)return m&&console.log("Found 0xFFE1 marker"),y(t,n+4,t.getUint16(n+2));n+=2+t.getUint16(n+2)}}function f(e){var t=new DataView(e);if(m&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return m&&console.log("Not a valid JPEG"),!1;for(var r=2,n=e.byteLength;r<n;){if(function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)}(t,r)){var i=t.getUint8(r+7);i%2!=0&&(i+=1),0===i&&(i=4);return l(e,r+8+i,t.getUint16(r+6+i))}r++}}function l(e,t,r){for(var n,i,o,a,u=new DataView(e),s={},c=t;c<t+r;)28===u.getUint8(c)&&2===u.getUint8(c+1)&&(a=u.getUint8(c+2))in O&&(o=u.getInt16(c+3),o+5,i=O[a],n=g(u,c+5,o),s.hasOwnProperty(i)?s[i]instanceof Array?s[i].push(n):s[i]=[s[i],n]:s[i]=n),c++;return s}function p(e,t,r,n,i){var o,a,u,s=e.getUint16(r,!i),c={};for(u=0;u<s;u++)o=r+12*u+2,a=n[e.getUint16(o,!i)],!a&&m&&console.log("Unknown tag: "+e.getUint16(o,!i)),c[a]=d(e,o,t,r,i);return c}function d(e,t,r,n,i){var o,a,u,s,c,f,l=e.getUint16(t+2,!i),p=e.getUint32(t+4,!i),d=e.getUint32(t+8,!i)+r;switch(l){case 1:case 7:if(1==p)return e.getUint8(t+8,!i);for(o=p>4?d:t+8,a=[],s=0;s<p;s++)a[s]=e.getUint8(o+s);return a;case 2:return o=p>4?d:t+8,g(e,o,p-1);case 3:if(1==p)return e.getUint16(t+8,!i);for(o=p>2?d:t+8,a=[],s=0;s<p;s++)a[s]=e.getUint16(o+2*s,!i);return a;case 4:if(1==p)return e.getUint32(t+8,!i);for(a=[],s=0;s<p;s++)a[s]=e.getUint32(d+4*s,!i);return a;case 5:if(1==p)return c=e.getUint32(d,!i),f=e.getUint32(d+4,!i),u=new Number(c/f),u.numerator=c,u.denominator=f,u;for(a=[],s=0;s<p;s++)c=e.getUint32(d+8*s,!i),f=e.getUint32(d+4+8*s,!i),a[s]=new Number(c/f),a[s].numerator=c,a[s].denominator=f;return a;case 9:if(1==p)return e.getInt32(t+8,!i);for(a=[],s=0;s<p;s++)a[s]=e.getInt32(d+4*s,!i);return a;case 10:if(1==p)return e.getInt32(d,!i)/e.getInt32(d+4,!i);for(a=[],s=0;s<p;s++)a[s]=e.getInt32(d+8*s,!i)/e.getInt32(d+4+8*s,!i);return a}}function h(e,t,r){var n=e.getUint16(t,!r);return e.getUint32(t+2+12*n,!r)}function v(e,t,r,n){var i=h(e,t+r,n);if(!i)return{};if(i>e.byteLength)return{};var o=p(e,t,t+i,R,n);if(o.Compression)switch(o.Compression){case 6:if(o.JpegIFOffset&&o.JpegIFByteCount){var a=t+o.JpegIFOffset,u=o.JpegIFByteCount;o.blob=new Blob([new Uint8Array(e.buffer,a,u)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",o.Compression)}else 2==o.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return o}function g(e,t,r){for(var n="",i=t;i<t+r;i++)n+=String.fromCharCode(e.getUint8(i));return n}function y(e,t){if("Exif"!=g(e,t,4))return m&&console.log("Not valid EXIF data! "+g(e,t,4)),!1;var r,n,i,o,a,u=t+6;if(18761==e.getUint16(u))r=!1;else{if(19789!=e.getUint16(u))return m&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;r=!0}if(42!=e.getUint16(u+2,!r))return m&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var s=e.getUint32(u+4,!r);if(s<8)return m&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(u+4,!r)),!1;if(n=p(e,u,u+s,w,r),n.ExifIFDPointer){o=p(e,u,u+n.ExifIFDPointer,x,r);for(i in o){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":o[i]=j[i][o[i]];break;case"ExifVersion":case"FlashpixVersion":o[i]=String.fromCharCode(o[i][0],o[i][1],o[i][2],o[i][3]);break;case"ComponentsConfiguration":o[i]=j.Components[o[i][0]]+j.Components[o[i][1]]+j.Components[o[i][2]]+j.Components[o[i][3]]}n[i]=o[i]}}if(n.GPSInfoIFDPointer){a=p(e,u,u+n.GPSInfoIFDPointer,_,r);for(i in a){switch(i){case"GPSVersionID":a[i]=a[i][0]+"."+a[i][1]+"."+a[i][2]+"."+a[i][3]}n[i]=a[i]}}return n.thumbnail=v(e,u,s,r),n}var m=!1,b=function e(t){return t instanceof e?t:this instanceof e?void(this.EXIFwrapped=t):new e(t)};void 0!==e&&e.exports&&(t=e.exports=b),t.EXIF=b;var x=b.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},w=b.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},_=b.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},R=b.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},j=b.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},O={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};b.getData=function(e,t){return!((self.Image&&e instanceof self.Image||self.HTMLImageElement&&e instanceof self.HTMLImageElement)&&!e.complete)&&(r(e)?t&&t.call(e):s(e,t),!0)},b.getTag=function(e,t){if(r(e))return e.exifdata[t]},b.getIptcTag=function(e,t){if(r(e))return e.iptcdata[t]},b.getAllTags=function(e){if(!r(e))return{};var t,n=e.exifdata,i={};for(t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i},b.getAllIptcTags=function(e){if(!r(e))return{};var t,n=e.iptcdata,i={};for(t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i},b.pretty=function(e){if(!r(e))return"";var t,n=e.exifdata,i="";for(t in n)n.hasOwnProperty(t)&&("object"==o(n[t])?n[t]instanceof Number?i+=t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":i+=t+" : ["+n[t].length+" values]\r\n":i+=t+" : "+n[t]+"\r\n");return i},b.readFromBinaryFile=function(e){return c(e)},n=[],void 0!==(i=function(){return b}.apply(t,n))&&(e.exports=i)}).call(void 0)},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r},writable:!0,configurable:!0}),Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=r.length;return function(o){if("function"!=typeof o&&("object"!==(void 0===o?"undefined":n(o))||null===o))throw new TypeError("Object.keys called on non-object");var a,u,s=[];for(a in o)e.call(o,a)&&s.push(a);if(t)for(u=0;u<i;u++)e.call(o,r[u])&&s.push(r[u]);return s}}())},function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.warn('[FLAMELINK] The "'+e+'" method is deprecated and will be removed in the next major version. '+t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(i,o){try{var a=t[i](o),u=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}return n("next")})}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.prepConstraintsForValidate=t.hasNonCacheableOptions=t.getScreenResolution=t.formatStructure=t.populateEntry=t.prepPopulateFields=t.pluckResultFields=t.filterByFolderId=t.getMediaRefPath=t.getFolderRefPath=t.getFileRefPath=t.getStorageRefPath=t.getSettingsRefPath=t.getSchemasRefPath=t.getNavigationRefPath=t.getContentRefPath=t.applyFilters=t.AVAILABLE_FILTER_OPTIONS=t.applyOrderBy=void 0;var a=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=r(229),s=n(u),c=r(97),f=n(c),l=r(236),p=n(l),d=r(0),h=n(d),v=r(71),g=n(v),y=r(237),m=n(y),b=r(79),x=n(b),w=r(50),_=n(w),R=r(99),j=n(R),O={},S=(t.applyOrderBy=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.orderByChild){if("string"!=typeof t.orderByChild||""===t.orderByChild)throw(0,j.default)('"orderByChild" should specify the child key to order by');return e.orderByChild(t.orderByChild)}return t.orderByValue?e.orderByValue():t.orderByKey?e.orderByKey():e},t.AVAILABLE_FILTER_OPTIONS=["limitToFirst","limitToLast","startAt","endAt","equalTo"]),k=(t.applyFilters=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).length?[].concat(S).reduce(function(e,r){return t[r]?e[r](t[r]):e},e):e},function(){throw(0,j.default)("The reference, environment and locale arguments are all required")}),F=(t.getContentRefPath=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k();return"/flamelink/environments/"+t+"/content/"+(e?e+"/"+r:"")},t.getNavigationRefPath=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k();return"/flamelink/environments/"+t+"/navigation/"+(e?e+"/"+r:"")},t.getSchemasRefPath=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return"/flamelink/environments/"+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:k())+"/schemas/"+(e||"")},t.getSettingsRefPath=function(e){return"/flamelink/settings/"+(e||"")},t.getStorageRefPath=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.width,n=t.path;return n?"/flamelink/media/sized/"+n+"/"+e:"/flamelink/media/"+(r?"sized/"+r+"/":"")+e},t.getFileRefPath=function(e){return"/flamelink/media/files/"+(e||"")},t.getFolderRefPath=function(e){return"/flamelink/media/folders/"+(e||"")},t.getMediaRefPath=function(e){return"/flamelink/media/"+(e||"")},t.filterByFolderId=(0,f.default)(function(e,t){return e?(0,s.default)(t,function(t,r,n){return r.folderId===e?Object.assign({},t,o({},n,r)):t},{}):t}),t.pluckResultFields=(0,f.default)(function(e,t){if(!t||!(0,h.default)(e))return t;var r=(0,x.default)(e);return(0,h.default)(t)?(0,s.default)(t,function(e,t){return e.concat(r(t))},[]):(0,m.default)(t)?(0,s.default)(t,function(e,t,n){return Object.assign({},e,o({},n,r(t)))},{}):t})),I=t.prepPopulateFields=function(e){return void 0===O.prepPopulateFields&&(O.prepPopulateFields=(0,g.default)(function(e){return e&&(0,h.default)(e)?e.map(function(e){return"string"==typeof e?{field:e}:e}):[]},function(e){return JSON.stringify(e)})),O.prepPopulateFields(e)},P=t.populateEntry=(0,f.default)(function(){var e=i(regeneratorRuntime.mark(function e(t,r,n,u,s,c){var l,d,v,g,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return",c);case 2:if(l=Object.keys(c),0!==l.length){e.next=5;break}throw(0,j.default)('"populateEntry" should be called with an object of objects');case 5:return d=(0,f.default)(function(){var e=i(regeneratorRuntime.mark(function e(u,s,c,f){var l,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c[0]){e.next=2;break}return e.abrupt("return",u);case 2:if(l=c.reduce(function(e,t){var r=s&&s.find(function(e){return e.key===t.field});return r&&r.relation?e.concat([Object.assign({},t,{contentType:r.relation,populateType:"relational"})]):r&&"media"===r.type?e.concat([Object.assign({},t,{populateType:"media"})]):r&&"repeater"===r.type&&(0,h.default)(t.subFields)?e.concat([Object.assign({},t,{populateType:"repeater"})]):r&&"fieldset"===r.type&&(0,h.default)(t.subFields)?e.concat([Object.assign({},t,{populateType:"fieldset"})]):e},[]),l[0]){e.next=5;break}return e.abrupt("return",u);case 5:return e.next=7,Promise.all(l.map(function(){var e=i(regeneratorRuntime.mark(function e(c){var l,p,v,g,y,b,x,w,R,O,S;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l=c.field,p=c.subFields,v=c.contentType,g=c.populateType,e.t0=g,e.next="media"===e.t0?4:"relational"===e.t0?10:"repeater"===e.t0?15:"fieldset"===e.t0?22:32;break;case 4:if(!u[f]||!u[f].hasOwnProperty(l)){e.next=9;break}if(y=u[f][l]||[],(0,h.default)(y)){e.next=8;break}throw(0,j.default)('The "'+l+'" field does not seem to be a valid media property.');case 8:return e.abrupt("return",Promise.all(y.map(function(){var e=i(regeneratorRuntime.mark(function e(i){var u,s,f,l,p,d,h,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=F(c.fields),s=P(t,r,n,v,c.populate),e.next=4,Promise.all([n.getFile(i,c),n.getURL(i,c)]);case 4:return f=e.sent,l=a(f,2),p=l[0],d=l[1],h=o({},i,Object.assign({},p,{url:d})),e.next=11,(0,_.default)(s,u)(h);case 11:return g=e.sent,e.abrupt("return",g[i]);case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}())));case 9:return e.abrupt("return",null);case 10:if(!u[f]||!u[f].hasOwnProperty(l)){e.next=14;break}return b=u[f][l],b=(0,h.default)(b)?b:[b],e.abrupt("return",Promise.all(b.map(function(){var e=i(regeneratorRuntime.mark(function e(i){var a,u,s,f,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=F(c.fields),u=P(t,r,n,v,c.populate),e.next=4,r.getRaw(v,i,c);case 4:return s=e.sent,f=o({},i,s.val()),e.next=8,(0,_.default)(u,a)(f);case 8:return l=e.sent,e.abrupt("return",l[i]);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}())));case 14:return e.abrupt("return",null);case 15:if(!u[f]||!u[f].hasOwnProperty(l)){e.next=21;break}if(x=u[f][l]||[],(0,h.default)(x)){e.next=19;break}throw(0,j.default)('The "'+l+'" field does not seem to be a valid repeater field.');case 19:return w=s&&s.find(function(e){return e.key===l}),e.abrupt("return",Promise.all(x.map(function(){var e=i(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(o({},r,t),w.options||[],I(p),r);case 2:return n=e.sent,e.abrupt("return",n[r]);case 4:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}())));case 21:return e.abrupt("return",null);case 22:if(!u[f]||!u[f].hasOwnProperty(l)){e.next=31;break}if(R=u[f][l],(0,m.default)(R)){e.next=26;break}throw(0,j.default)('The "'+l+'" field does not seem to be a valid fieldset field.');case 26:return O=s&&s.find(function(e){return e.key===l}),e.next=29,Promise.all(Object.keys(R).map(function(){var e=i(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(o({},r,o({},t,R[t])),O.options||[],I(p),r);case 2:return n=e.sent,e.abrupt("return",n[r]);case 4:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}()));case 29:return S=e.sent,e.abrupt("return",S.reduce(function(e,t){return Object.assign({},e,t)},{}));case 31:return e.abrupt("return",null);case 32:return e.abrupt("return",u[f][l]);case 33:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()));case 7:return v=e.sent,e.abrupt("return",l.reduce(function(e,t,r){var n=t.field;return e[f]&&e[f].hasOwnProperty(n)&&(e[f][n]=v[r]),e},(0,p.default)(u)));case 9:case"end":return e.stop()}},e,void 0)}));return function(t,r,n,i){return e.apply(this,arguments)}}()),e.next=8,t.getFields(u);case 8:return v=e.sent,g=I(s),e.next=12,Promise.all(l.map(d(c,v,g)));case 12:return y=e.sent,e.abrupt("return",l.reduce(function(e,t,r){return Object.assign({},e,o({},t,y[r][t]))},{}));case 14:case"end":return e.stop()}},e,void 0)}));return function(t,r,n,i,o,a){return e.apply(this,arguments)}}());t.formatStructure=(0,f.default)(function(e,t,r){var n=t||{},i=n.idProperty,o=void 0===i?"id":i,a=n.parentProperty,u=void 0===a?"parentId":a,s=(0,h.default)(r)?r:Object.keys(r).map(function(e){return r[e]});if(!(0,h.default)(s))throw(0,j.default)('"formatStructure" should be called with an array of items');if("nested"===e||"tree"===e){return function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.map(function(e){return Object.assign({},e,{children:s.filter(function(t){return t[u]===e[o]})})}).filter(function(e){return e[u]===r}).map(function(t){return 0===t.children.length?t:Object.assign({},t,{children:e(t.children,t[o])})})}(s,0)}return s}),t.getScreenResolution=function(){var e="devicePixelRatio"in window?window.devicePixelRatio:1;return Math.max(window.screen.width,window.screen.height)*e},t.hasNonCacheableOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).some(function(e){return["noCache","event","orderByValue","orderByChild"].concat(S).includes(e)})},t.prepConstraintsForValidate=function(e){return(0,h.default)(e)?e.reduce(function(e,t){return Object.assign({},e,o({},t.rule,t.ruleValue))},{}):(0,m.default)(e)?e:{}}},function(e,t,r){function n(e,t,r){var n=s(e)?i:u,c=arguments.length<3;return n(e,a(t,4),r,c,o)}var i=r(48),o=r(230),a=r(11),u=r(235),s=r(0);e.exports=n},function(e,t,r){var n=r(231),i=r(234),o=i(n);e.exports=o},function(e,t,r){function n(e,t){return e&&i(e,t,o)}var i=r(232),o=r(7);e.exports=n},function(e,t,r){var n=r(233),i=n();e.exports=i},function(e,t){function r(e){return function(t,r,n){for(var i=-1,o=Object(t),a=n(t),u=a.length;u--;){var s=a[e?u:++i];if(!1===r(o[s],s,o))break}return t}}e.exports=r},function(e,t,r){function n(e,t){return function(r,n){if(null==r)return r;if(!i(r))return e(r,n);for(var o=r.length,a=t?o:-1,u=Object(r);(t?a--:++a<o)&&!1!==n(u[a],a,u););return r}}var i=r(17);e.exports=n},function(e,t){function r(e,t,r,n,i){return i(e,function(e,i,o){r=n?(n=!1,e):t(r,e,i,o)}),r}e.exports=r},function(e,t,r){function n(e){return i(e,o|a)}var i=r(45),o=1,a=4;e.exports=n},function(e,t,r){function n(e){if(!a(e)||i(e)!=u)return!1;var t=o(e);if(null===t)return!0;var r=l.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&f.call(r)==p}var i=r(5),o=r(46),a=r(4),u="[object Object]",s=Function.prototype,c=Object.prototype,f=s.toString,l=c.hasOwnProperty,p=f.call(Object);e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DEFAULT_CONFIG={env:"production",locale:"en-US"},t.ALLOWED_CHILD_EVENTS=["value","child_added","child_removed","child_changed","child_moved"],t.DEFAULT_REQUIRED_IMAGE_SIZE=240}])});
//# sourceMappingURL=flamelink.js.map